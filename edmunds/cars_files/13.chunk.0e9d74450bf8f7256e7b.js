(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"./data/models/partner-offer-model.js":function(e,t,a){"use strict";a.d(t,"k",function(){return V}),a.d(t,"l",function(){return L}),a.d(t,"i",function(){return w}),a.d(t,"h",function(){return U}),a.d(t,"j",function(){return D}),a.d(t,"m",function(){return Y}),a.d(t,"b",function(){return F}),a.d(t,"d",function(){return B}),a.d(t,"c",function(){return $}),a.d(t,"e",function(){return q}),a.d(t,"f",function(){return H}),a.d(t,"g",function(){return W}),a.d(t,"a",function(){return G});var s=a("../node_modules/@babel/runtime/helpers/esm/objectSpread.js"),n=a("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),i=(a("../node_modules/core-js/modules/es6.regexp.replace.js"),a("../node_modules/lodash/get.js")),o=a.n(i),l=a("../node_modules/lodash/round.js"),r=a.n(l),d=a("../node_modules/lodash/isEmpty.js"),c=a.n(d),m=a("../node_modules/prop-types/index.js"),u=a.n(m),p=a("./data/api/api-client.js"),b=a("./data/luckdragon/segment.js"),_=a("./utils/event-toolbox.js"),h=a("./tracking/constant.js"),E=a("./site-modules/shared/constants/appraisal/appraisal.js"),y=a("./data/models/vehicle-vin.js"),g=a("./site-modules/shared/utils/vin-utils.js"),S=a("./data/api/api-metrics.js"),v=a("./utils/location.js"),C=a("./data/models/experiments.js"),f=a("./utils/experiment/experiment-util.js");const T={Pragma:"no-cache","Cache-Control":"no-cache"},O=2017,N="honda",I="accord",A="EVAL-2682",P={action_name:h.b.ACTION_RECEIVE_EPO,action_category:h.b.SYSTEM_ACTION_CATEGORY,action_cause:h.b.PAGE_LOAD_CAUSE,subaction_name:h.b.SUBACTION_EPO_VIN_ELIGIBILITY_CHECK},j={creative_id:E.c,action_name:h.b.ACTION_RECEIVE_EPO,action_category:h.b.USER_ACTION_CATEGORY,action_cause:h.b.PAGE_LOAD_CAUSE,subaction_name:h.b.SUBACTION_EPO_MMY_ZIP_ELIGIBILITY_CHECK},V=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=Object(v.a)(a).messageType,n="happy-path-mock"===s?{messageType:s}:{messageType:A,to:e,shortUrl:{ttl:"7d",url:t}};return p.c.fetchJson("/partner-offers/sms/messages",{headers:{"content-type":"application/json"},retries:0,method:"POST",body:JSON.stringify(n)})},k=e=>["/v2/quotes",{headers:{"content-type":"application/json"},method:"POST",body:JSON.stringify({vin:e})}],L=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.vin,a=e.condition,i=void 0===a?"":a,o=e.conditionPricing,l=e.isEval3446Chal1Enabled,d=e.chromeStyleSku,m=e.isEligibleYmmz,u=e.lastQuoteId,b=e.updatePartnerOfferQuoteId,y=e.isPartnerOfferEligibleVin,g=Object(n.a)(e,["vin","condition","conditionPricing","isEval3446Chal1Enabled","chromeStyleSku","isEligibleYmmz","lastQuoteId","updatePartnerOfferQuoteId","isPartnerOfferEligibleVin"]);if(!t)throw new Error("Invalid VIN can't be submitted for partner offer appraisal");const S=t.toUpperCase();let v=u;if(l){if(!v&&m)try{b(v=(await p.d.fetchJson(...k(S))).id)}catch(e){v=null}if(!d||!v||!y)return{}}const C=JSON.stringify(l?Object(s.a)({styleCode:d},g,{vin:S}):Object(s.a)({condition:i,conditionPricing:o},g,{vin:S}));let f,T,O=h.b.NO_OFFER_CODE;const N=l?[`/v2/quotes/${v}`,{headers:{"content-type":"application/json"},retries:1,method:"PATCH",body:C}]:["/appraisals",{headers:{"content-type":"application/json"},retries:1,method:"POST",body:C}];try{f=await p.d.fetchJson(...N),c()(f)||(f.valuation=(e=>{let t=e.valuation;return t?r()(t,-2):t})(f));const e=f,t=e.code,a=e.valuation;T=a&&0!==a?a:h.b.ZERO_VALUATION,t&&(O=t)}catch(e){f={},e.status&&(T=`${e.status}_ERROR`)}l&&b(null);const I=o?o[i.toLowerCase()]||o[E.n.CLEAN.toLowerCase()]:0;if(!c()(f)){const e=f.declineReason;if(e){const t=f.valuation;_.a.fireTrackAction({event_type:h.b.EVENT_TYPE_ACTION_PROGRESS,event_data:{action_name:h.b.ACTION_APPRAISE_VEHICLE,action_category:h.b.SYSTEM_ACTION_CATEGORY,action_cause:h.b.PAGE_LOAD_CAUSE,subaction_name:h.b.SUBACTION_DECLINE_REASON_VALUE,creative_id:E.R,value:e}}),_.a.fireTrackAction({event_type:h.b.EVENT_TYPE_ACTION_PROGRESS,event_data:{action_name:h.b.ACTION_APPRAISE_VEHICLE,action_category:h.b.SYSTEM_ACTION_CATEGORY,action_cause:h.b.PAGE_LOAD_CAUSE,subaction_name:h.b.SUBACTION_DECLINE_REASON,creative_id:E.R,value:`${S}_epo_offer_eligibility_check_${t||0}_${e}`}})}i&&o&&_.a.fireTrackAction({event_type:h.b.EVENT_TYPE_ACTION_COMPLETED,event_data:{action_name:h.b.ACTION_RECEIVE_EPO,action_category:h.b.USER_ACTION_CATEGORY,action_cause:h.b.ACTION_CAUSE_BUTTON_CLICK,subaction_name:h.b.SUBACTION_TMV_APPRAISAL,creative_id:E.W,value:I}}),_.a.fireTrackAction({event_type:h.b.EVENT_TYPE_ACTION_END,event_data:{action_name:h.b.ACTION_RECEIVE_EPO,subaction_name:h.b.SUBACTION_REDEMPTION_CERTIFICATE,action_category:h.b.USER_ACTION_CATEGORY,action_cause:h.b.ACTION_CAUSE_BUTTON_CLICK,creative_id:E.W,value:f.redemptionCertificateUri}})}l&&_.a.fireTrackAction({event_type:h.b.EVENT_TYPE_ACTION_END,event_data:{action_name:h.b.ACTION_RECEIVE_EPO,subaction_name:h.b.SUBACTION_QUOTE_ID,action_category:h.b.USER_ACTION_CATEGORY,creative_id:E.W,value:v}}),I&&_.a.fireTrackAction({event_type:h.b.EVENT_TYPE_ACTION_COMPLETED,event_data:{action_name:h.b.ACTION_RECEIVE_EPO,action_category:h.b.USER_ACTION_CATEGORY,action_cause:h.b.ACTION_CAUSE_BUTTON_CLICK,subaction_name:h.b.SUBACTION_EPO_OFFER,creative_id:E.W,value:T}}),_.a.fireTrackAction({event_type:h.b.EVENT_TYPE_ACTION_END,event_data:{action_name:h.b.ACTION_RECEIVE_EPO,action_category:h.b.USER_ACTION_CATEGORY,subaction_name:h.b.SUBACTION_OFFER_CODE,creative_id:E.W,value:O}});const A=f,P=A.sourceId,j=A.vin,V=A.valuation;return P&&_.a.fireTrackAction({event_type:h.b.EVENT_TYPE_ACTION_END,event_data:{action_name:h.b.ACTION_RECEIVE_EPO,subaction_name:h.b.SUBACTION_SOURCE_ID,action_category:h.b.USER_ACTION_CATEGORY,creative_id:E.W,value:P}}),V>0&&j&&_.a.fireTrackAction({event_type:h.b.EVENT_TYPE_ACTION_PROGRESS,event_data:{action_name:h.b.ACTION_RECEIVE_EPO,action_category:h.b.USER_ACTION_CATEGORY,subaction_name:h.b.SUBACTION_EPO_OFFER_VIN,creative_id:E.W,value:j}}),I&&(T===h.b.ZERO_VALUATION||`${T}`.includes("_ERROR"))&&_.a.fireTrackAction({event_type:h.b.EVENT_TYPE_ACTION_PROGRESS,event_data:{action_category:h.b.USER_ACTION_CATEGORY,action_name:h.b.ACTION_RECEIVE_EPO,subaction_name:h.b.SUBACTION_VIN_ERROR,creative_id:E.W,value:`${t}_${h.b.SUBACTION_EPO_OFFER}_${T}`}}),f},x=e=>{return{id:e.id,name:e.name,addressLine1:e.address_line_1,addressLine2:e.address_line_2,city:e.city,state:e.state,zipCode:e.zip_code,longitude:e.longitude,latitude:e.latitude,message:e.message,storeUrl:e.store_url,distance:e.distance_in_miles}},R=async(e,t)=>{let a=e.make,n=e.model,i=e.year,o=e.zipCode,l=e.isEligibleHardcodeYmmBypass;const r=l?N:a,d=l?I:n,c=l?O:i;let m;try{m=await(t?Object(S.b)(p.d,t):p.d).fetchJson(`/eligibility?ZipCode=${o}&Make=${r}&Model=${d}&Year=${c}`,{}),l&&(m.reason=E.vb);const e=m,a=e.store,s=e.isEligible,n=e.reason,i=e.nearestStores;m={store:x(a),isEligible:!!s,reason:n,nearestStores:i.map(x)}}catch(e){m={isEligible:!1,reason:m&&m.reason||null,nearestStores:[]}}if(!l){let e;const t=m.store?m.store.message:void 0;e=m.isEligible?(e=>`${E.gb.mmy_zip_eligible}${e?`_${e.toLowerCase().replace(/\s|-/g,"_").replace(/\W/g,"")}`:""}`)(t):m.reason?m.reason:E.gb.mmy_zip_ineligible,_.a.fireTrackAction({event_type:h.b.EVENT_TYPE_ACTION_COMPLETED,event_data:Object(s.a)({},j,{value:e})})}return m},w=e=>e.partnerOffer?e.partnerOffer.partnerOfferQuoteId:null,U=e=>e.partnerOffer?e.partnerOffer.licensePlateError:null,D=async e=>{let t;try{const a=t=await p.d.fetchJson("/vins/search-by-address",{headers:{"content-type":"application/json"},method:"POST",body:JSON.stringify(e)}),s=a.vehicles,n=void 0===s?[]:s,i=a.message,o=void 0===i?"No VINs returned for address":i;if(!n.length)throw new Error(o);t={vehicles:n}}catch(e){t={vehicles:[]},_.a.fireTrackAction({event_type:h.b.EVENT_TYPE_ACTION_COMPLETED,event_data:{action_category:h.b.USER_ACTION_CATEGORY,action_cause:h.b.ACTION_CAUSE_BUTTON_CLICK,action_name:h.b.ACTION_RECEIVE_EPO,creative_id:E.K,value:`${e.status}_ERROR`}})}return t},M=(e,t)=>{_.a.fireTrackAction({event_type:h.b.EVENT_TYPE_ACTION_PROGRESS,event_data:{action_name:h.b.ACTION_RECEIVE_EPO,action_category:h.b.USER_ACTION_CATEGORY,action_cause:h.b.ACTION_CAUSE_BUTTON_CLICK,subaction_name:e,creative_id:E.c,value:t}})},Y=async(e,t)=>{let a=e.chromeStyleSku,s=e.selectedOptions;const n=[],i=[];let o;(void 0===s?[]:s).forEach(e=>{let t=e.name,a=e.options;n.push(t);const s=a.reduce((e,t)=>{let a=e.oemCode,s=e.price;const n=t.price.baseMSRP,i=t.oemCode;return n<s?{oemCode:i,price:n}:{oemCode:a,price:s}},{price:1/0});i.push(s.oemCode)});try{const e=o=await(t?Object(S.b)(p.d,t):p.d).fetchJson("/v2/translation/equipment-options",{headers:{"content-type":"application/json"},retries:0,method:"POST",body:JSON.stringify({sku:a,partnerEquipmentDescriptions:n,manufacturerOptionCodes:i})}),s=e.standardOptionCodes,l=e.availableOptionCodes;M(h.b.SUBACTION_EPO_TRANSLATION_OPTIONS,"Success"),M(h.b.SUBACTION_EPO_TRANSLATION_STANDARD_OPTION_COUNT,s&&s.length),M(h.b.SUBACTION_EPO_TRANSLATION_AVAILABLE_OPTION_COUNT,l&&l.length),o={standardOptionCodes:s,availableOptionCodes:l}}catch(e){o={standardOptionCodes:[],availableOptionCodes:[]},M(h.b.SUBACTION_EPO_TRANSLATION_OPTIONS,`${e.status}_ERROR`)}return o},F=Object(b.a)("partnerOffer",[{path:'zipCode["{zipCode}"].make["{make}"].model["{model}"].year["{year}"].isHardcodeBypassDisabled["{isEligibleHardcodeYmmDisabledTest}"].partnerOfferEligibilityResponse',async resolve(e,t){let a=e.make,s=e.model,n=e.year,i=e.zipCode,o=e.isEligibleHardcodeYmmDisabledTest,l=await R({make:a,model:s,year:n,zipCode:i},t);return l.isEligible||"true"===`${o}`||(l=await R({zipCode:i,isEligibleHardcodeYmmBypass:!0},t)),l}},{path:'styleId["{styleId}"].chromeStyleIds["{chromeStyleIds}"].engineSize["{engineSize}"].transmissionType["{transmissionType}"].sku',async resolve(e,t){const a=e.styleId,s=encodeURIComponent("Metadata[EdmundsStyleId]"),n=[];[{valueKey:"chromeStyleIds",parameterKey:"ChromeStyleId"},{valueKey:"engineSize",parameterKey:"EngineSize"},{valueKey:"transmissionType",parameterKey:"TransmissionType"}].forEach(t=>{"undefined"!==`${e[t.valueKey]}`&&n.push(`${t.parameterKey}=${e[t.valueKey]}`)}),n.push(`${s}=${a}`);const i=`/v2/translation/chrome-style?${n.join("&")}`;return Object(S.b)(p.d,t).fetchJson(i,{headers:{"content-type":"application/json"},method:"GET"}).then(e=>{let t=e.sku;return _.a.fireTrackAction({event_type:h.b.EVENT_TYPE_ACTION_PROGRESS,event_data:{action_name:h.b.ACTION_RECEIVE_EPO,action_category:h.b.USER_ACTION_CATEGORY,action_cause:h.b.ACTION_CAUSE_BUTTON_CLICK,subaction_name:h.b.SUBACTION_EPO_TRANSLATION_SKU,creative_id:E.c,value:t}}),t}).catch(e=>{let t=e.status;_.a.fireTrackAction({event_type:h.b.EVENT_TYPE_ACTION_PROGRESS,event_data:{action_name:h.b.ACTION_RECEIVE_EPO,action_category:h.b.USER_ACTION_CATEGORY,action_cause:h.b.ACTION_CAUSE_BUTTON_CLICK,subaction_name:h.b.SUBACTION_EPO_TRANSLATION_SKU,creative_id:E.c,value:`${t}_ERROR`}})})}},{path:'vin["{vin}"].make["{make}"].model["{model}"].year["{year}"].isHardcodeBypass["{isEligibleHardcodeYmmBypass}"].eligibility',async resolve(e,t){let a=e.vin,n=e.make,i=e.model,l=e.year,r=e.isEligibleHardcodeYmmBypass;const d=await t.resolveValue(Object(y.c)({squishVin:Object(g.a)(a)}),y.b),c=!d.length||d.some(e=>{let t=e.makeName,a=void 0===t?"":t,s=e.modelName,o=void 0===s?"":s,r=e.year;return n&&n.toLowerCase()===a.toLowerCase()&&i&&i.toLowerCase()===o.toLowerCase()&&l===`${r}`});let m=!1,u=!0,b={},v=[];const T=await t.resolveValue("eligibilityCreativeIds",F),O=o()(T,`${a}`,E.B),N={experiments:{computed:await t.resolveValue("computed",C.a),published:await t.resolveValue("published",C.a)}},I="chal1"===f.a.getForcedOrAssignedRecipeName({state:N,campaignName:"EVAL-3446",defaultVal:"ctrl"});if(c){const e=await(async(e,t,a,n,i)=>{if(!e)throw new Error("Invalid VIN can't be used to determine partner offer eligibility");let o={isEligible:!0,reason:E.vb};if(!a){const a=i?k(e.toUpperCase()):[`/eligibility/${e.toUpperCase()}`,{}];try{o=await(t?Object(S.b)(p.d,t):p.d).fetchJson(...a)}catch(e){o={isEligible:!1}}}const l=o,r=l.isEligible,d=l.reason,c=P;return c.creative_id=n,!r||a?(c.value=d||E.gb.api_failure,_.a.fireTrackAction({event_type:h.b.EVENT_TYPE_ACTION_PROGRESS,event_data:Object(s.a)({},c,{action_name:h.b.ACTION_APPRAISE_VEHICLE,subaction_name:a?h.b.SUBACTION_VIN_ENTRY_INELIGIBLE_MMY_ZIP:h.b.SUBACTION_VIN_ERROR,action_cause:a?h.b.ACTION_CAUSE_BUTTON_CLICK:c.action_cause,value:a?e:`${e}_${c.subaction_name}_${c.value}`})})):c.value=E.gb.vin_eligible,a||_.a.fireTrackAction({event_type:h.b.EVENT_TYPE_ACTION_COMPLETED,event_data:c}),o})(a,t,"true"===`${r}`,O,I),n=e.isEligible,i=e.reason,o=e.lastAppraisal,l=e.lastQuote,d=e.id;m=n,u="invalid-vin"!==i,b=n&&o&&o.vin.toUpperCase()===a.toUpperCase()&&o.conditionQuestionResponses||{},v=n&&l&&l.vin.toUpperCase()===a.toUpperCase()&&l.conditionQuestions||[],I&&await t.updateValue("partnerOfferQuoteId",d)}return{isEligibleVin:m,isCheckDigitValid:u,isSquishVinValid:c,squishStyles:d,lastConditionQuestionResponses:b,lastQuoteConditionQuestionsResponses:v}}},{path:"partnerOfferQuoteId"},{path:'vin.licensePlate["{licensePlate}"].stateCode["{stateCode}"]',async resolve(e,t){let a,s=e.licensePlate,n=e.stateCode;try{const e=a=await Object(S.b)(p.d,t).fetchJson("/vins/search-by-plate",{headers:{"content-type":"application/json"},method:"POST",body:JSON.stringify({plateNumber:s,plateState:n})}),i=e.vin,o=e.message,l=e.service;if(!i&&""!==i)throw new Error(o||"No VIN returned for licensePlate and stateCode");a={vin:i,service:l}}catch(e){await t.updateValue("licensePlateError",!0),a=void 0}return a}},{path:"eligibilityCreativeIds"},{path:"licensePlateError"},{path:"conditionsQuestions",async resolve(e,t){let a;try{a=await Object(S.b)(p.e,t).fetchJson("/v2/conditions/questions")}catch(e){a=[]}return a}},{path:"conditionsQuestions.e2e",async resolve(e,t){let a;try{a=await Object(S.b)(p.e,t).fetchJson("/v2/conditions/questions",{headers:T})}catch(e){a=[]}return a}}]);function B(e){let t=e.licensePlate,a=e.stateCode;return t&&a?`vin.licensePlate["${t}"].stateCode["${a}"]`:""}function $(e){let t=e.styleId,a=e.chromeStyleIds,s=e.engineSize,n=e.transmissionType;if(t){return`styleId["${t}"].chromeStyleIds["${o()(a,"[0]")}"].engineSize["${s||void 0}"].transmissionType["${n||void 0}"].sku`}return""}function q(e){let t=e.make,a=e.model,s=e.year,n=e.zipCode,i=e.isEligibleHardcodeYmmDisabledTest;return t&&a&&s&&n?`zipCode["${n}"].make["${t}"].model["${a}"].year["${s}"].isHardcodeBypassDisabled["${void 0!==i&&i}"].partnerOfferEligibilityResponse`:""}function H(e){let t=e.make,a=e.model,s=e.year,n=e.vin,i=e.isEligibleHardcodeYmmBypass;return t&&a&&s&&n?`vin["${n}"].make["${t}"].model["${a}"].year["${s}"].isHardcodeBypass["${void 0!==i&&i}"].eligibility`:""}function W(e){return`conditionsQuestions${Object(v.a)(e).e2e?".e2e":""}`}const G={Eligibility:u.a.shape({store:u.a.shape({name:u.a.string,addressLine1:u.a.string,addressLine2:u.a.string,longitude:u.a.number,latitude:u.a.number}),isEligible:u.a.bool,nearestStores:u.a.arrayOf(u.a.shape({}))}),VinEligibility:u.a.shape({isEligibleVin:u.a.bool,isSquishVinValid:u.a.bool,squishStyles:y.a.SquishStyles}),ConditionsQuestions:u.a.arrayOf(u.a.shape({id:u.a.number,desc:u.a.string,category:u.a.string,answerType:u.a.string,answers:u.a.arrayOf(u.a.shape({id:u.a.number,desc:u.a.string,answerType:u.a.string,detailQuestions:u.a.arrayOf(u.a.shape({id:u.a.number,desc:u.a.string,answerType:u.a.string,answers:u.a.arrayOf(u.a.shape({}))}))}))}))}},"./data/models/states.js":function(e,t,a){"use strict";a.d(t,"a",function(){return d}),a.d(t,"b",function(){return c});var s=a("../node_modules/prop-types/index.js"),n=a.n(s),i=a("./data/luckdragon/segment.js"),o=a("./data/api/api-client.js"),l=a("./data/api/api-metrics.js");const r=n.a.shape({id:n.a.string,name:n.a.string,latitude:n.a.number,longitude:n.a.number,niceName:n.a.string,type:n.a.string,niceType:n.a.string,stateCode:n.a.string,population:n.a.number}),d={State:r,States:n.a.arrayOf(r)},c=Object(i.a)("states",[{path:"allStates",resolve:(e,t)=>Object(l.b)(o.c,t).fetchJson("/state/v2/")},{path:"allStateCodes",resolve:(e,t)=>Object(l.b)(o.c,t).fetchJson("/state/v2/?view=custom,fieldsInclude:stateCode&sortby=stateCode:ASC")}])},"./data/models/vehicle-vin.js":function(e,t,a){"use strict";a.d(t,"f",function(){return c}),a.d(t,"e",function(){return m}),a.d(t,"b",function(){return u}),a.d(t,"c",function(){return p}),a.d(t,"d",function(){return b}),a.d(t,"a",function(){return _});var s=a("../node_modules/lodash/get.js"),n=a.n(s),i=a("../node_modules/prop-types/index.js"),o=a.n(i),l=a("./data/api/api-client.js"),r=a("./data/api/api-metrics.js"),d=a("./data/luckdragon/segment.js");const c=async(e,t)=>{let a;try{const s=t?await Object(r.b)(l.c,t):l.c;a=await s.fetchJson((e=>`/vehicle/v3/styles/vins/${e}`)(e))}catch(e){a=[]}return a},m=async e=>{let t;try{t=await l.c.fetchJson((e=>`/inventory/v5/universalvin/${e}?fields=vin,vehicleInfo.styleInfo,vehicleInfo.partsInfo,vehicleInfo.vehicleColors`)(e))}catch(e){t=[]}return t},u=Object(d.a)("vehicleVin",[{path:'squishVin["{squishVin}"].stylesBasicInfo',resolve:async(e,t)=>(async(e,t)=>{let a;try{const s=t?await Object(r.b)(l.c,t):l.c;a=await s.fetchJson((e=>`/vehicle/v3/styles?squishVins.squishVin=${e.toUpperCase()}&fields=id,year,makeNiceId,makeName,modelNiceId,modelName`)(e))}catch(e){a={}}return n()(a,"results",[])})(e.squishVin,t)},{path:'vin["{vin}"].stylesBasicInfo',async resolve(e,t){let a=e.vin;return c(a,t)}}]);function p(e){let t=e.squishVin;return t?`squishVin["${t}"].stylesBasicInfo`:""}function b(e){let t=e.vin;return t?`vin["${t}"].stylesBasicInfo`:""}const _={SquishStyles:o.a.arrayOf(o.a.shape({id:o.a.number,year:o.a.number,makeName:o.a.string,makeNiceId:o.a.string,modelName:o.a.string,modelNiceId:o.a.string}))}},"./site-modules/shared/components/appraisal/appraisal-tabs-container/appraisal-tabs-container.jsx":function(e,t,a){"use strict";var s=a("../node_modules/lodash/isEqual.js"),n=a.n(s),i=a("../node_modules/lodash/noop.js"),o=a.n(i),l=a("../node_modules/lodash/get.js"),r=a.n(l),d=a("../node_modules/react/index.js"),c=a.n(d),m=a("../node_modules/prop-types/index.js"),u=a.n(m),p=a("../node_modules/classnames/index.js"),b=a.n(p),_=a("../node_modules/react-redux/es/index.js"),h=a("../node_modules/reactstrap/lib/ButtonGroup.js"),E=a.n(h),y=a("../node_modules/reactstrap/lib/TabPane.js"),g=a.n(y),S=a("../node_modules/reactstrap/lib/TabContent.js"),v=a.n(S),C=a("../node_modules/reactstrap/lib/Row.js"),f=a.n(C),T=a("../node_modules/reactstrap/lib/Col.js"),O=a.n(T),N=a("./utils/location.js"),I=a("./site-modules/shared/components/appraisal/appraisal-tabs/appraise-by-tabs-header-item.jsx"),A=a("../node_modules/@babel/runtime/helpers/esm/extends.js"),P=a("../node_modules/lodash/isEmpty.js"),j=a.n(P),V=a("../node_modules/reactstrap/lib/Button.js"),k=a.n(V),L=a("./site-modules/shared/components/ymms-dropdowns/ymms-dropdowns.jsx"),x=(a("../node_modules/core-js/modules/es6.regexp.to-string.js"),a("../node_modules/reactstrap/lib/Form.js")),R=a.n(x),w=a("../node_modules/reactstrap/lib/FormGroup.js"),U=a.n(w),D=a("./site-modules/shared/components/field-error/field-error.jsx"),M=a("./constants/pub-states.js"),Y=a("./site-modules/shared/components/vehicle-dropdowns/make-dropdown.jsx"),F=a("./site-modules/shared/components/vehicle-dropdowns/model-dropdown.jsx"),B=a("./site-modules/shared/components/vehicle-dropdowns/year-dropdown.jsx");const $={Col:{PropTypes:u.a.shape({xs:u.a.number,md:u.a.number,lg:u.a.number,xl:u.a.number}),DefaultProps:{xs:12,md:null,lg:null,xl:null}}};class q extends d.Component{constructor(){super(...arguments),this.state={},this.onChange=(()=>{const e=this.state,t=e.make,a=e.model,s=e.year;this.props.onChange({make:t,model:a,year:s})}),this.setMake=(e=>{let t=e.slug;this.setState({make:t,model:null,year:null},this.onChange)}),this.setModel=(e=>{let t=e.slug;this.setState({model:t,year:null},this.onChange)}),this.setYear=(e=>{let t=e.year;this.setState({year:t},this.onChange)})}static getDerivedStateFromProps(e,t){const a=e.prepopulatedVehicle,s=a.year,n=a.makeSlug,i=a.modelSlug;if(n&&t.prevPrepopulatedVehicle!==e.prepopulatedVehicle){const t={year:s&&s.toString(),make:n,model:i};return t.prevPrepopulatedVehicle=e.prepopulatedVehicle,t}return{}}render(){const e=this.props,t=e.className,a=e.dropdownClassName,s=e.labelClassName,n=e.formGroupClassName,i=e.children,o=e.dropdownPlaceholders,l=e.dropdownLabels,r=e.dropdownTrackingIds,d=e.includeNextYear,m=e.displayError,u=e.errorMessages,p=e.hideLabels,b=e.earliestYear,_=e.rowClassName,h=e.colClassName,E=e.dropdownColSize,y=e.suffix,g=e.pubStates,S=this.state,v=S.make,C=S.model,T=S.submodel,N=S.style,I=S.year;return c.a.createElement(R.a,{autoComplete:"off",className:t},c.a.createElement(f.a,{className:_},c.a.createElement(O.a,Object(A.a)({},E.make,{className:h}),c.a.createElement(U.a,{className:n},c.a.createElement(Y.b,{name:"select-make",toggle:o.make,labelText:l.make,valueKey:"slug",labelKey:"name",onChange:this.setMake,value:v,className:a,labelClassName:s,"data-tracking-id":r.make,id:`mmy-select-make${y}`,isLabelHidden:p,pubStates:g}),m.make&&c.a.createElement(D.a,{id:"makeError",classes:"mb-0 mt-0_25",error:u.make}))),c.a.createElement(O.a,Object(A.a)({},E.model,{className:h}),c.a.createElement(U.a,{className:n},c.a.createElement(F.b,{make:v?{slug:v}:null,name:"select-model",toggle:o.model,labelText:l.model,valueKey:"slug",labelKey:"name",value:C,onChange:this.setModel,className:a,labelClassName:s,"data-tracking-id":r.model,id:`mmy-select-model${y}`,isLabelHidden:p,pubStates:g}),m.model&&c.a.createElement(D.a,{id:"modelError",classes:"mb-0 mt-0_25",error:u.model}))),c.a.createElement(O.a,Object(A.a)({},E.year,{className:h}),c.a.createElement(U.a,{className:n},c.a.createElement(B.a,{name:"select-year",toggle:o.year,labelText:l.year,valueKey:"year",labelKey:"year",make:v?{slug:v}:null,model:C?{slug:C}:null,value:I,onChange:this.setYear,onFocus:this.props.onFocus,className:a,labelClassName:s,"data-tracking-id":r.year,id:`mmy-select-year${y}`,isLabelHidden:p,includeNextYear:d,earliestYear:b,pubStates:g}),m.year&&c.a.createElement(D.a,{id:"yearError",classes:"mb-0 mt-0_25",error:u.year})))),i&&i({make:v,model:C,submodel:T,year:I,style:N}))}}q.propTypes={children:u.a.func,onChange:u.a.func,onFocus:u.a.func,className:u.a.string,dropdownClassName:u.a.string,labelClassName:u.a.string,formGroupClassName:u.a.string,prepopulatedVehicle:u.a.shape({submodels:u.a.shape({name:u.a.string,slug:u.a.string}),id:u.a.oneOfType([u.a.number,u.a.string]),year:u.a.oneOfType([u.a.number,u.a.string]),makeSlug:u.a.string,modelSlug:u.a.string,name:u.a.string}),dropdownPlaceholders:u.a.shape({make:u.a.string,model:u.a.string,submodel:u.a.string,year:u.a.string,style:u.a.string}),dropdownLabels:u.a.shape({make:u.a.string,model:u.a.string,submodel:u.a.string,year:u.a.string,style:u.a.string}),dropdownTrackingIds:u.a.shape({make:u.a.string,model:u.a.string,submodel:u.a.string,year:u.a.string,style:u.a.string}),errorMessages:u.a.shape({make:u.a.string,model:u.a.string,submodel:u.a.string,year:u.a.string,style:u.a.string}),displayError:u.a.shape({make:u.a.bool,model:u.a.bool,year:u.a.bool,style:u.a.bool}),useStyledSelects:u.a.bool,hasModelsDropdown:u.a.bool,hasSubmodelsDropdown:u.a.bool,hasStylesDropdown:u.a.bool,includeNextYear:u.a.bool,hideLabels:u.a.bool,earliestYear:u.a.number,useMostPopularStylesDropdown:u.a.bool,rowClassName:u.a.string,colClassName:u.a.string,dropdownColSize:u.a.shape({year:$.Col.PropTypes,make:$.Col.PropTypes,model:$.Col.PropTypes,submodel:$.Col.PropTypes,style:$.Col.PropTypes}),suffix:u.a.string,pubStates:u.a.arrayOf(u.a.string)},q.defaultProps={children:null,className:null,dropdownClassName:null,onChange:o.a,onFocus:o.a,labelClassName:"dropdown-label label text-gray-dark mb-0_5",formGroupClassName:"mb-0",prepopulatedVehicle:{},dropdownLabels:{},dropdownTrackingIds:{},dropdownPlaceholders:{make:"Select",model:"Select",submodel:"Select",year:"Select",style:"Select"},errorMessages:{make:"Please select a make",model:"Please select a model",year:"Please select a year"},displayError:{},useStyledSelects:!1,hasModelsDropdown:!1,hasSubmodelsDropdown:!0,hasStylesDropdown:!0,includeNextYear:!0,hideLabels:!1,earliestYear:1990,useMostPopularStylesDropdown:!1,rowClassName:null,colClassName:null,dropdownColSize:{year:$.Col.DefaultProps,make:$.Col.DefaultProps,model:$.Col.DefaultProps,submodel:$.Col.DefaultProps,style:$.Col.DefaultProps},suffix:"",pubStates:[M.a.NEW,M.a.NEW_USED,M.a.USED]};var H=a("./utils/event-toolbox.js"),W=a("./tracking/constant.js"),G=a("./site-modules/shared/utils/appraisal-link-constructor.js"),z=a("./site-modules/shared/components/spinner/spinner.jsx"),K=a("./site-modules/shared/components/link/link.jsx"),Q=a("./data/models/vehicle.js"),J=a("./data/luckdragon/redux/react-binding.jsx"),Z=a("./site-modules/shared/constants/appraisal/appraisal.js"),X=a("./site-modules/shared/components/appraisal/appraisal-tabs/appraise-tab-content-form-wrapper.jsx");const ee={make:"Please select a make",model:"Please select a model",year:"Please select a year"},te={year:"Select year",make:"Select make",model:"Select model"},ae={year:"Year",make:"Make",model:"Model"},se=[M.a.USED,M.a.NEW_USED],ne="ymm";class ie extends d.PureComponent{constructor(){super(...arguments),this.state={make:null,model:null,year:null,validated:!1,isRedirecting:!1,prepopulatedVehicle:void 0},this.onChange=(e=>{let t=e.make,a=e.model,s=e.year;return this.setState({make:t,model:a,year:s,validated:!1})}),this.setDefaultButtonStateForCachedPage=(e=>{e.persisted&&this.setRedirectingButtonStatus(!1)}),this.setPrepopulatedVehicle=(e=>{let t=e.make,a=e.model;const s={year:e.year,makeSlug:t,modelSlug:a};this.setState({prepopulatedVehicle:s})}),this.getAppraisalButton=(e=>{let t=e.make,a=e.model,s=e.year;const n=this.props,i=n.btnTrackingId,o=n.ctaText,l=n.isVdpEmbedded,r=n.isAppExtensionPage,d=this.state.isRedirecting;let m=null;t&&a&&s&&(m=Object(G.b)({make:t,model:a,year:s,isAppExtensionPage:r}));const u=l?{tag:"a",target:"_blank",href:m}:{tag:K.a,to:m};return c.a.createElement("div",null,c.a.createElement(k.a,Object(A.a)({},m?u:{},{onClick:m?this.trackAppraisalSubmit:this.validate,color:"success",className:"text-transform-none text-white btn-responsive-md-down","data-test":"appraise-btn","data-tracking-id":i,disabled:d}),d&&c.a.createElement("span",{className:"pr-0_5"},c.a.createElement(z.a,{size:14,thickness:1,color:"white"})),c.a.createElement("span",{className:"size-16"},o)))}),this.setRedirectingButtonStatus=(e=>this.setState({isRedirecting:e})),this.validate=(e=>{e.preventDefault();const t=this.state,a=t.make,s=t.model,n=t.year;this.setState({validated:!0}),this.setRedirectingButtonStatus(!!(a&&s&&n))}),this.trackAppraisalSubmit=(()=>{const e=this.state,t=e.make,a=e.model,s=e.year;this.setRedirectingButtonStatus(!!(t&&a&&s)),H.a.fireTrackAction({event_type:W.b.EVENT_TYPE_ACTION_END,event_data:{action_category:W.b.USER_ACTION_CATEGORY,action_name:W.b.ACTION_APPRAISE_VEHICLE,action_cause:W.b.ACTION_CAUSE_LINK_CLICK,subaction_name:W.b.SUBMIT_VIN,creative_id:Z.e,value:ne}})})}componentDidMount(){const e=this.props.initialVehicle;j()(e)||(this.onChange(e),this.setPrepopulatedVehicle(e)),window.addEventListener("pageshow",this.setDefaultButtonStateForCachedPage)}componentDidUpdate(e){const t=this.props,a=t.vehicle,s=t.query;j()(a)||n()(e.vehicle,a)||(this.onChange(s),this.setPrepopulatedVehicle(s))}componentWillUnmount(){this.setRedirectingButtonStatus(!1),window.removeEventListener("pageshow",this.setDefaultButtonStateForCachedPage)}render(){const e=this.state,t=e.make,a=e.model,s=e.year,n=e.validated,i=e.prepopulatedVehicle,o=this.props,l=o.isFullWidth,r=o.isYearDropdownFirst,d={make:n&&!t,model:n&&!a,year:n&&!s},m={dropdownPlaceholders:te,dropdownLabels:ae,labelClassName:"size-12",includeNextYear:!1,formGroupClassName:"mb-1_5",onChange:this.onChange,errorMessages:ee,displayError:d,pubStates:se,prepopulatedVehicle:i};return c.a.createElement("div",{className:"appraise-by-mmy-tab"},c.a.createElement(X.a,{isFullWidth:l},r?c.a.createElement(L.a,Object(A.a)({useStyledSelects:!0,hasModelsDropdown:!0,hasSubmodelsDropdown:!1,hasStylesDropdown:!1},m),this.getAppraisalButton):c.a.createElement(q,m,this.getAppraisalButton)))}}ie.propTypes={isFullWidth:u.a.bool,ctaText:u.a.string,btnTrackingId:u.a.string,query:u.a.shape({make:u.a.string,model:u.a.string,year:u.a.string}),vehicle:u.a.shape({id:u.a.number}),isVdpEmbedded:u.a.bool,isYearDropdownFirst:u.a.bool,isAppExtensionPage:u.a.bool,initialVehicle:u.a.shape({make:u.a.string,model:u.a.string,year:u.a.oneOfType([u.a.number,u.a.string])})},ie.defaultProps={isFullWidth:!1,ctaText:"Appraise My Car",btnTrackingId:null,query:{},vehicle:{},isVdpEmbedded:!1,isYearDropdownFirst:!0,isAppExtensionPage:!1,initialVehicle:null};const oe={vehicle:Object(J.a)(e=>{let t=e.query,a=void 0===t?{}:t;const s=a.make,n=a.model,i=a.year;return s&&n&&i?Object(Q.v)({make:s,model:n,year:i}):""},Q.c)},le=Object(_.c)(e=>({isAppExtensionPage:r()(e,"pageContext.isAppExtensionPage")}))(Object(J.b)(ie,oe));var re=a("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),de=a("./data/models/vehicle-vin.js"),ce=a("./site-modules/shared/utils/vin-utils.js"),me=a("../node_modules/@babel/runtime/helpers/esm/objectSpread.js"),ue=a("../node_modules/reactstrap/lib/Input.js"),pe=a.n(ue),be=a("./utils/history/venom-history.js"),_e=a("./site-modules/shared/components/form-validation/validation.js"),he=a("./site-modules/shared/utils/appraisal/check-vin-inventory.js"),Ee=a("./site-modules/shared/components/find-vin-modal/find-vin-modal.jsx"),ye=a("./site-modules/shared/utils/appraiser/appraiser-validation-helper.js"),ge=a("./utils/seed-randomizers.js");const Se={action_category:W.b.USER_ACTION_CATEGORY,action_cause:W.b.ACTION_CAUSE_USER_INPUT,action_name:W.b.ACTION_APPRAISE_VEHICLE};class ve extends d.Component{constructor(){super(...arguments),this.state={vin:Object(ye.q)(this.props.vin),wasFormSubmitted:!1,isVinValid:_e.a.validateVIN(this.props.vin),isVinValidLength:_e.a.validateVinLength(this.props.vin),isSubmitting:!1,styleIds:[],colorId:""},this.onChange=(e=>this.setState({vin:Object(ye.q)(e.target.value),wasFormSubmitted:!1,isSubmitting:!1},this.validate)),this.onSubmit=(async()=>{this.setState({wasFormSubmitted:!0,isSubmitting:!0});const e=this.state,t=e.vin,a=e.isVinValid,s=this.props,n=s.isStylesFromUniversalVinEnabled,i=s.setStylesAndVin,o=s.isLookUpStyleView,l=s.ctaText,d=s.creativeId;if(a){let e,a,s=[],c=[];if(n)s=(c=await Object(de.e)(t)).map(e=>r()(e,"vehicleInfo.styleInfo",{})).map(e=>({makeName:e.make,makeNiceId:e.makeNiceId,modelName:e.model,modelNiceId:e.modelNiceId,year:e.year,styleId:parseInt(e.styleId,10),styleName:e.style})),e=c.length>1?null:r()(c,"[0].vehicleInfo.vehicleColors.exterior.id",""),a=c.map(e=>r()(e,"vehicleInfo.styleInfo.styleId","")),H.a.fireTrackAction(Object(Z.nb)(a,d));else{const e=await Object(de.f)(t);s=e,a=e.map(e=>{return e.styleId})}return this.setState({styleIds:a,colorId:e}),i(s,t),H.a.fireTrackAction({event_type:W.b.EVENT_TYPE_ACTION_PROGRESS,event_data:Object(me.a)({},Se,{creative_id:d,subaction_name:W.b.SUBACTION_VIN_ENTRY,value:t})}),H.a.fireTrackAction({event_type:W.b.EVENT_TYPE_ACTION_END,event_data:Object(me.a)({},Se,{creative_id:d,action_cause:W.b.ACTION_CAUSE_LINK_CLICK,subaction_name:W.b.SUBMIT_VIN,value:o?l:W.b.VIN})}),this.props.onVinChange(t)}return this.setState({isSubmitting:!1}),this.fireVinErrorTracking(W.b.SUBACTION_VIN_VALIDATION,W.b.VIN_FORMAT_INVALID)}),this.getAppraisalButton=(()=>{const e=this.props,t=e.ctaText,a=e.isVdpEmbedded,s=e.isLookUpStyleView,n=!this.isSquishVinInvalid()&&this.state.isSubmitting;return c.a.createElement("div",{className:b()({"mt-0_5":s})},c.a.createElement(k.a,{color:"success",className:b()("text-transform-none btn-responsive-sm-down",{"py-0_5":a}),"data-test":"appraise-btn-by-vin",onClick:this.onSubmit,disabled:n},n&&c.a.createElement("span",{className:"pr-0_5"},c.a.createElement(z.a,{size:14,thickness:1,color:"white"})),c.a.createElement("span",{className:"size-16"},t)))}),this.checkAndSetProfileOfferVin=(e=>{e&&(this.onChange({target:{value:e}}),this.props.isLookUpStyleView||H.a.fireTrackAction({event_type:W.b.EVENT_TYPE_ACTION_COMPLETED,event_data:{action_name:W.b.ACTION_APPRAISE_VEHICLE,action_category:W.b.USER_ACTION_CATEGORY,subaction_name:W.b.VIN_AUTOFILL,creative_id:Z.e}}))}),this.uniqInputId="",this.resetIsSubmitting=(()=>this.setState({isSubmitting:!1})),this.isSquishVinInvalid=(()=>{const e=this.props.squishStyles;return this.state.isVinValid&&e&&0===e.length}),this.validate=(()=>{const e=this.state.vin;this.setState({isVinValidLength:_e.a.validateVinLength(e),isVinValid:_e.a.validateVIN(e)})}),this.fireVinErrorTracking=((e,t)=>{const a=this.props.creativeId;H.a.fireTrackAction({event_type:W.b.EVENT_TYPE_ACTION_PROGRESS,event_data:Object(me.a)({},Se,{creative_id:a,subaction_name:e,value:t})}),H.a.fireTrackAction({event_type:W.b.EVENT_TYPE_ACTION_PROGRESS,event_data:Object(me.a)({},Se,{creative_id:a,subaction_name:W.b.SUBACTION_VIN_ERROR,value:`${this.state.vin}_${e}_${t}`})})})}componentDidMount(){this.props.useUniqId&&(this.uniqInputId=Object(ge.c)())}componentDidUpdate(e){const t=this.props,a=t.squishStyles,s=t.isVdpEmbedded,n=t.isLookUpStyleView,i=t.creativeId,l=t.isAppExtensionPage,r=t.profileOfferVin,d=this.state,c=d.wasFormSubmitted,m=d.isVinValid,u=d.vin,p=d.styleIds,b=d.isSubmitting,_=d.colorId;if(e.profileOfferVin!==r&&this.checkAndSetProfileOfferVin(r),a&&c&&m)if(a.length>0){H.a.fireTrackAction({event_type:W.b.EVENT_TYPE_ACTION_PROGRESS,event_data:Object(me.a)({},Se,{creative_id:i,action_category:W.b.SYSTEM_ACTION_CATEGORY,subaction_name:W.b.SUBACTION_SQUISHVIN_DECODE,value:a.length>1?W.b.MMY_MANY_FOUND:W.b.MMY_ONE_FOUND})});const e=a[0],t=e.makeNiceId,r=e.modelNiceId,d=e.year,c=Object(G.b)({make:t,model:r,year:d,queryParams:{vin:u,styleIds:p.join(","),colorId:_},isAppExtensionPage:l});s?(window.open(c,"_blank"),b&&this.resetIsSubmitting()):n||be.b.push(c),Object(he.a)(u,Z.e,o.a)}else this.fireVinErrorTracking(W.b.SUBACTION_SQUISHVIN_DECODE,W.b.MMY_NOT_FOUND)}componentWillUnmount(){this.setState({isSubmitting:!1})}render(){const e=this.state,t=e.vin,a=e.isVinValid,s=e.isVinValidLength,n=e.wasFormSubmitted,i=this.props,o=i.squishStyles,l=i.isLookUpStyleView,r=i.isFullWidth,d=i.profileOfferVin,m=n&&(!a||o&&0===o.length),u=`vin-number${this.uniqInputId}`,p=!d&&!l;return c.a.createElement("div",{className:"appraise-by-vin-tab"},c.a.createElement(X.a,{isFullWidth:r},c.a.createElement(f.a,null,c.a.createElement(O.a,{xs:12},c.a.createElement(U.a,{className:b()("styled-input",{"has-danger":m})},c.a.createElement(pe.a,{name:u,id:u,type:"text",className:"form-control text-uppercase vin-number",value:t,onChange:this.onChange,maxLength:Z.cb,minLength:Z.cb,placeholder:"Enter VIN","aria-label":"vin number"}),m&&c.a.createElement("div",{className:"value-error-text text-danger small mt-0_5"},s&&!a&&c.a.createElement("div",null,Z.sb),!s&&c.a.createElement("div",null,Z.tb),this.isSquishVinInvalid()&&c.a.createElement("div",null,Z.ub)))))),p&&c.a.createElement(Ee.a,{className:"mb-1 p-0 border-0 text-primary-darker text-transform-none size-16 find-vin-modal-open-btn",creativeId:Z.e}),this.getAppraisalButton())}}ve.propTypes={onVinChange:u.a.func.isRequired,setStylesAndVin:u.a.func,squishStyles:u.a.arrayOf(u.a.shape({id:u.a.number,year:u.a.number,makeName:u.a.string,makeNiceId:u.a.string,modelName:u.a.string,modelNiceId:u.a.string})),ctaText:u.a.string,vin:u.a.string,profileOfferVin:u.a.string,creativeId:u.a.string,isVdpEmbedded:u.a.bool,isStylesFromUniversalVinEnabled:u.a.bool,isLookUpStyleView:u.a.bool,isFullWidth:u.a.bool,useUniqId:u.a.bool,isAppExtensionPage:u.a.bool},ve.defaultProps={squishStyles:null,creativeId:Z.e,setStylesAndVin:o.a,ctaText:"Appraise My Car",vin:"",profileOfferVin:"",isVdpEmbedded:!1,isStylesFromUniversalVinEnabled:!1,isLookUpStyleView:!1,isFullWidth:!1,useUniqId:!1,isAppExtensionPage:!1};const Ce={squishStyles:Object(J.a)(e=>{let t=e.vin;return Object(de.c)({squishVin:Object(ce.a)(t)})},de.b)},fe=e=>(e&&e.vin||"").toUpperCase(),Te=Object(_.c)(e=>({isAppExtensionPage:r()(e,"pageContext.isAppExtensionPage")}))(Object(J.b)(ve,Ce));class Oe extends d.PureComponent{constructor(){super(...arguments),this.state={vin:fe(this.props.query)||this.props.profileOfferVin},this.onVinChange=(e=>this.setState({vin:e}))}render(){const e=this.props,t=e.isSellCar,a=e.isMobile,s=e.ctaText,n=e.isVdpEmbedded,i=e.isStylesFromUniversalVinEnabled,o=e.setStylesAndVin,l=e.profileOfferVin,r=Object(re.a)(e,["isSellCar","isMobile","ctaText","isVdpEmbedded","isStylesFromUniversalVinEnabled","setStylesAndVin","profileOfferVin"]);return c.a.createElement(Te,Object(A.a)({vin:this.state.vin,onVinChange:this.onVinChange,isSellCar:t,isMobile:a,ctaText:s,isVdpEmbedded:n,isStylesFromUniversalVinEnabled:i,setStylesAndVin:o,profileOfferVin:l},r))}}Oe.propTypes={isSellCar:u.a.bool,isMobile:u.a.bool,ctaText:u.a.string,isVdpEmbedded:u.a.bool,isStylesFromUniversalVinEnabled:u.a.bool,query:u.a.shape({vin:u.a.string}),setStylesAndVin:u.a.func,profileOfferVin:u.a.string},Oe.defaultProps={isSellCar:!1,isMobile:!1,ctaText:"Appraise My Car",isVdpEmbedded:!1,isStylesFromUniversalVinEnabled:!1,query:{},setStylesAndVin:o.a,profileOfferVin:""};var Ne=a("./data/models/partner-offer-model.js"),Ie=a("./data/models/states.js"),Ae=a("./site-modules/shared/components/appraisal/appraisal-tabs/license-plate-tab-content/license-plate-tab-content.jsx");const Pe={stateCodes:Object(J.a)("allStateCodes",Ie.b),squishStyles:Object(J.a)(e=>{let t=e.vin;return Object(de.c)({squishVin:Object(ce.a)(t)})},de.b),vinFromLicensePlate:Object(J.a)(e=>{let t=e.licensePlate,a=e.stateCode;return Object(Ne.d)({licensePlate:t,stateCode:a})},Ne.b)},je=Object(_.c)(e=>({licensePlateLookupError:Object(Ne.h)(e),isAppExtensionPage:r()(e,"pageContext.isAppExtensionPage")}))(Object(J.b)(Ae.a,Pe));class Ve extends d.PureComponent{constructor(){super(...arguments),this.state={vin:"",licensePlate:"",stateCode:""},this.setVin=(e=>{this.setState({vin:e})}),this.setLicensePlateAndStateCode=(e=>{let t=e.licensePlate,a=e.stateCode;return this.setState({licensePlate:t,stateCode:a})}),this.clearVin=(()=>this.setState({vin:"",licensePlate:null,stateCode:null}))}render(){const e=this.props,t=e.isMobile,a=e.creativeId,s=e.ctaText,n=e.isVdpEmbedded,i=e.vinTabLink,o=e.isStylesFromUniversalVinEnabled,l=e.setStylesAndVin,r=Object(re.a)(e,["isMobile","creativeId","ctaText","isVdpEmbedded","vinTabLink","isStylesFromUniversalVinEnabled","setStylesAndVin"]),d=this.state,m=d.vin,u=d.licensePlate,p=d.stateCode;return c.a.createElement(je,Object(A.a)({vin:m,setVin:this.setVin,clearVin:this.clearVin,isMobile:t,ctaText:s,creativeId:a,isVdpEmbedded:n,vinTabLink:i,setLicensePlateAndStateCode:this.setLicensePlateAndStateCode,licensePlate:u,stateCode:p,isStylesFromUniversalVinEnabled:o,setStylesAndVin:l},r))}}Ve.propTypes={isMobile:u.a.bool,isVdpEmbedded:u.a.bool,isLookUpStyleView:u.a.bool,isStylesFromUniversalVinEnabled:u.a.bool,ctaText:u.a.string,creativeId:u.a.string,vinTabLink:u.a.oneOfType([u.a.node,u.a.func]),setStylesAndVin:u.a.func},Ve.defaultProps={isMobile:!1,isVdpEmbedded:!1,isLookUpStyleView:!1,isStylesFromUniversalVinEnabled:!1,ctaText:void 0,creativeId:void 0,vinTabLink:null,setStylesAndVin:o.a};var ke=a("./site-modules/shared/components/appraisal/appraisal-tabs/appraisal-tab-link/appraisal-tab-link.jsx"),Le=a("./site-modules/shared/components/appraisal/appraisal-tabs/constants.js"),xe=a("./site-modules/shared/components/appraisal/appraisal-utm-storage/appraisal-utm-storage.js");a("./site-modules/shared/components/appraisal/appraisal-tabs-container/appraisal-tabs-container.scss");a.d(t,"c",function(){return Re}),a.d(t,"g",function(){return we}),a.d(t,"b",function(){return Ue}),a.d(t,"f",function(){return Me}),a.d(t,"d",function(){return Fe}),a.d(t,"e",function(){return Be}),a.d(t,"a",function(){return He});const Re="MMY",we="VIN",Ue="LICENSE_PLATE",De={id:Re,label:"Year/Make/Model",secondaryLinkLabel:"Year, Make & Model",TabComponent:le},Me={id:we,label:"VIN",secondaryLinkLabel:"VIN",TabComponent:Oe},Ye={id:Ue,label:"License Plate",secondaryLinkLabel:"License Plate",TabComponent:Ve},Fe={DEFAULT:[De,Me,Ye],LICENSE_PLATE:[Ye,Me,De],YMM_SUPPRESSED:[Ye,Me],VIN:[Me,Ye,De]},Be={[Re]:{FIRST:Ye,SECOND:Me},[we]:{FIRST:Me,SECOND:Ye},[Ue]:{FIRST:Ye,SECOND:Me}},$e=e=>{let t=e.hasVinQuery,a=e.isLicensePlateTabDefault,s=e.hasMMYQuery,n=e.isLookUpStyleView,i=e.initialActiveTabId;return n?i:t?we:a&&!s?Ue:Re};class qe extends d.Component{constructor(e){super(e),this.setActiveTab=(e=>this.setState({activeTabId:e})),this.getEdmundsLogo=(()=>c.a.createElement("div",null,c.a.createElement("div",{className:"d-inline-flex p-0_25 align-items-center text-primary mb-0_25 bg-transparent size-16 font-weight-normal"},c.a.createElement("i",{className:"icon-edmunds-car size-30 mr-0_25"}),c.a.createElement("span",{className:"pl-0_5"},"Did you know?")))),this.buildTabsFromProps=(e=>{const t=e.location,a=e.isSellCar,s=e.referer,n=e.isLicensePlateTabDefault,i=e.initialActiveTabId,o=e.isLookUpStyleView,l=Object(N.a)(t),r=l.make,d=l.model,c=l.year,m=l.vin,u=l.tab,p=r&&d&&c,b=!!m;let _=u&&u.toUpperCase();Le.c.includes(_)||(_=null);const h=!a&&s&&s.includes("edmunds.com"),E=_===Le.a||null===_&&(n||h);let y=E?Fe.LICENSE_PLATE:Fe.DEFAULT;return o&&(y=n?Fe.YMM_SUPPRESSED:[...Fe.YMM_SUPPRESSED].reverse()),{tabs:y,activeTabId:$e({isLicensePlateTabDefault:E,hasMMYQuery:p,hasVinQuery:b,isLookUpStyleView:o,initialActiveTabId:i})}}),this.fireTabTracking=((e,t)=>{H.a.fireTrackAction({event_type:W.b.EVENT_TYPE_ACTION_COMPLETED,event_data:{action_category:W.b.SYSTEM_ACTION_CATEGORY,action_cause:W.b.PAGE_LOAD_CAUSE,action_name:W.b.ACTION_SHOW_CONTENT,subaction_name:W.b.TAB_DEFAULT,creative_id:this.props.creativeId,value:e.find(e=>{return e.id===t}).label}})}),this.handleTabLinkClick=(e=>{const t=e.currentTarget.dataset.tabId;this.setActiveTab(t)}),this.renderTabContent=(()=>{const e=this.props,t=e.isMobile,a=e.isSellCar,s=e.creativeId,n=e.ctaText,i=e.location,o=e.isVdpEmbedded,l=e.isYearDropdownFirst,r=e.initialStateCode,d=e.initialVehicle,m=e.isLookUpStyleView,u=e.setStylesAndVin,p=e.isFullWidth,b=e.isProfileOfferVinPrepopulationEnabled,_=e.profileOfferVin,h=Object(N.a)(i),E=this.state,y=E.tabs,S=E.activeTabId;return c.a.createElement(v.a,{activeTab:S},y.map(e=>{let i=e.id,E=e.TabComponent;return c.a.createElement(g.a,{tabId:i,key:`tab-${i}`,"data-test":`tab-${i}`},c.a.createElement(E,{isMobile:t,isSellCar:a,creativeId:s,ctaText:n,query:h,isVdpEmbedded:o,isYearDropdownFirst:l,initialStateCode:r,initialVehicle:d,setStylesAndVin:u,isLookUpStyleView:m,isFullWidth:p,useUniqId:m,profileOfferVin:b?_:void 0,vinTabLink:c.a.createElement(ke.a,{classNames:"text-decoration-underline",onClick:this.handleTabLinkClick,tabLink:Me})}))}))}),this.state=this.buildTabsFromProps(e),xe.a.checkAndSetSemCampaignAppraisals(this.props.location),xe.a.checkAndSetSemCampaignFacebook(this.props.location)}componentDidMount(){const e=this.state,t=e.tabs,a=e.activeTabId,s=this.props,n=s.isLookUpStyleView,i=s.setUtmAccountAppraisal,o=s.setUtmSourceFacebook;i(xe.a.isSemCampaignAppraisals),o(xe.a.isSemCampaignFacebook),n||this.fireTabTracking(t,a)}componentDidUpdate(e){const t=this.state,a=t.tabs,s=t.activeTabId,i=this.props,o=i.isVisibleInDrawer,l=i.isProfileOfferVinPrepopulationEnabled,r=i.profileOfferVin;o&&!n()(e.isVisibleInDrawer,o)&&this.fireTabTracking(a,s),l&&e.profileOfferVin!==r&&r&&this.setActiveTab(we)}render(){const e=this.props,t=e.creativeId,a=e.className,s=e.title,n=e.isLookUpStyleView,i=e.hideEdmundsLogo,o=this.state,l=o.tabs,r=o.activeTabId;return c.a.createElement("div",{id:"appraisal-tabs-container",className:b()("appraisal-tabs-container",a,{"rounded p-1 p-md-1_5":!n}),"data-tracking-parent":t},s&&c.a.createElement("div",{className:"heading-4 mb-1_5"},s),c.a.createElement("div",{className:b()(`d-flex ${Le.b}`,{"mb-1 mb-lg-1_5":n})},n&&c.a.createElement("span",{className:"medium text-gray-darker font-weight-bold d-inline-block pb-0_5 mr-0_5"},"Enter by:"),c.a.createElement(E.a,{size:"md",role:"tablist"},l.map((e,t)=>{let a=e.id,s=e.label;return c.a.createElement(I.a,{key:a,label:s,tabId:a,isActive:a===r,onBtnClick:this.setActiveTab,isFirstItem:0===t})}))),n?null:c.a.createElement(f.a,null,c.a.createElement(O.a,{xs:12,className:"appraisal-tab-link-copy text-gray-dark size-14 mt-1 mb-1_5",role:"tablist"},!i&&this.getEdmundsLogo(),c.a.createElement("span",null,"By entering your "),r===Re?c.a.createElement(ke.a,{onClick:this.handleTabLinkClick,tabLink:Be[r].FIRST}):Be[r].FIRST.label," or ",c.a.createElement(ke.a,{onClick:this.handleTabLinkClick,tabLink:Be[r].SECOND}),c.a.createElement("span",null,", you\u2019ll get a more accurate appraisal that may raise your car's value."))),this.renderTabContent())}}qe.propTypes={isMobile:u.a.bool,isLookUpStyleView:u.a.bool,isSellCar:u.a.bool,creativeId:u.a.string,ctaText:u.a.string,isLicensePlateTabDefault:u.a.bool,location:u.a.shape({}),referer:u.a.string,className:u.a.string,title:u.a.oneOfType([u.a.string,u.a.node]),initialActiveTabId:u.a.string,isVdpEmbedded:u.a.bool,isYearDropdownFirst:u.a.bool,initialStateCode:u.a.string,initialVehicle:u.a.shape({make:u.a.string,model:u.a.string,year:u.a.oneOfType([u.a.number,u.a.string])}),setStylesAndVin:u.a.func,isFullWidth:u.a.bool,isVisibleInDrawer:u.a.bool,setUtmAccountAppraisal:u.a.func,setUtmSourceFacebook:u.a.func,isProfileOfferVinPrepopulationEnabled:u.a.bool,profileOfferVin:u.a.string,hideEdmundsLogo:u.a.bool},qe.defaultProps={isMobile:!1,isLookUpStyleView:!1,isSellCar:!1,isVdpEmbedded:!1,isYearDropdownFirst:!0,creativeId:Z.e,ctaText:"See your car's value",isLicensePlateTabDefault:!1,location:{},referer:void 0,title:"",initialStateCode:"",className:"",initialActiveTabId:Ue,initialVehicle:null,setStylesAndVin:o.a,isFullWidth:!1,isVisibleInDrawer:!1,setUtmAccountAppraisal:o.a,setUtmSourceFacebook:o.a,isProfileOfferVinPrepopulationEnabled:!1,profileOfferVin:"",hideEdmundsLogo:!1};const He=Object(_.c)(e=>({location:r()(e,"pageContext.location"),referer:r()(e,"pageContext.page.referer"),profileOfferVin:r()(e,"profile.data.idm.appraisalOffersHistory[0].vin")}))(qe)},"./site-modules/shared/components/appraisal/appraisal-tabs/appraisal-tab-link/appraisal-tab-link.jsx":function(e,t,a){"use strict";a.d(t,"a",function(){return d});var s=a("../node_modules/react/index.js"),n=a.n(s),i=a("../node_modules/prop-types/index.js"),o=a.n(i),l=a("../node_modules/classnames/index.js"),r=a.n(l);class d extends s.PureComponent{constructor(){super(...arguments),this.handleClick=(e=>{e.preventDefault(),this.props.onClick(e)})}render(){const e=this.props,t=e.tabLink,a=t.id,s=t.secondaryLinkLabel,i=e.classNames;return n.a.createElement("a",{className:r()("text-primary-darker",i),role:"tab",href:"#appraisal-tabs-container",onClick:this.handleClick,"data-tab-id":a,rel:"nofollow","data-tracking-id":"appraisal_tab_selected"},s)}}d.propTypes={onClick:o.a.func.isRequired,tabLink:o.a.shape({id:o.a.string,secondaryLinkLabel:o.a.string}).isRequired,classNames:o.a.string},d.defaultProps={classNames:""}},"./site-modules/shared/components/appraisal/appraisal-tabs/appraise-by-tabs-header-item.jsx":function(e,t,a){"use strict";a.d(t,"a",function(){return u});var s=a("../node_modules/@babel/runtime/helpers/esm/objectSpread.js"),n=a("../node_modules/react/index.js"),i=a.n(n),o=a("../node_modules/prop-types/index.js"),l=a.n(o),r=a("../node_modules/reactstrap/lib/Button.js"),d=a.n(r),c=a("../node_modules/classnames/index.js"),m=a.n(c);class u extends n.PureComponent{constructor(){super(...arguments),this.handleClick=(()=>{this.props.onBtnClick(this.props.tabId)})}render(){const e=this.props,t=e.isActive,a=e.label,n=e.tabId,o=e.isFirstItem,l=e.isAppraisalValuePage?{"px-0_5":!o,"pl-0 pr-0_5":o}:{"px-0_5 px-md-0_75":!o,"pl-0 pr-0_5 pr-md-0_75":o};return i.a.createElement(d.a,{role:"tab",className:m()("appraise-by-tab-control size-16 text-decoration-none border-0 pt-0 pb-0_5 text-gray-darker",Object(s.a)({active:t},l)),onClick:this.handleClick,"data-test":`tab-${n}`,"data-tracking-id":"appraisal_tab_selected","data-tracking-value":a},i.a.createElement("span",{className:"appraise-by-tab-label font-weight-normal text-capitalize"},a))}}u.propTypes={tabId:l.a.string.isRequired,label:l.a.string.isRequired,onBtnClick:l.a.func.isRequired,isActive:l.a.bool,isFirstItem:l.a.bool,isAppraisalValuePage:l.a.bool},u.defaultProps={isActive:!1,isFirstItem:!1,isAppraisalValuePage:!1}},"./site-modules/shared/components/appraisal/appraisal-tabs/appraise-tab-content-form-wrapper.jsx":function(e,t,a){"use strict";a.d(t,"a",function(){return m});var s=a("../node_modules/react/index.js"),n=a.n(s),i=a("../node_modules/prop-types/index.js"),o=a.n(i),l=a("../node_modules/reactstrap/lib/Row.js"),r=a.n(l),d=a("../node_modules/reactstrap/lib/Col.js"),c=a.n(d);class m extends s.PureComponent{render(){const e=this.props,t=e.isFullWidth,a=e.children;return t?n.a.createElement("div",null,a):n.a.createElement(r.a,null,n.a.createElement(c.a,{xs:12,md:9,lg:8},a))}}m.propTypes={children:o.a.oneOfType([o.a.arrayOf(o.a.node),o.a.node]).isRequired,isFullWidth:o.a.bool},m.defaultProps={isFullWidth:!1}},"./site-modules/shared/components/appraisal/appraisal-tabs/constants.js":function(e,t,a){"use strict";a.d(t,"b",function(){return s}),a.d(t,"a",function(){return n}),a.d(t,"c",function(){return i});const s="appraise-by-tabs-headers",n="LP",i=["MMY",n]},"./site-modules/shared/components/appraisal/appraisal-tabs/license-plate-tab-content/license-plate-tab-content.jsx":function(e,t,a){"use strict";var s=a("../node_modules/@babel/runtime/helpers/esm/extends.js"),n=a("../node_modules/@babel/runtime/helpers/esm/objectSpread.js"),i=a("../node_modules/lodash/get.js"),o=a.n(i),l=a("../node_modules/lodash/noop.js"),r=a.n(l),d=a("../node_modules/lodash/isEmpty.js"),c=a.n(d),m=a("../node_modules/lodash/isEqual.js"),u=a.n(m),p=a("../node_modules/react/index.js"),b=a.n(p),_=a("../node_modules/prop-types/index.js"),h=a.n(_),E=a("../node_modules/classnames/index.js"),y=a.n(E),g=a("../node_modules/reactstrap/lib/Form.js"),S=a.n(g),v=a("../node_modules/reactstrap/lib/Row.js"),C=a.n(v),f=a("../node_modules/reactstrap/lib/Col.js"),T=a.n(f),O=a("../node_modules/reactstrap/lib/Input.js"),N=a.n(O),I=a("../node_modules/reactstrap/lib/FormGroup.js"),A=a.n(I),P=a("../node_modules/reactstrap/lib/Label.js"),j=a.n(P),V=a("../node_modules/reactstrap/lib/Button.js"),k=a.n(V),L=a("./data/models/states.js"),x=a("./data/models/partner-offer-model.js"),R=a("./utils/history/venom-history.js"),w=a("./utils/event-toolbox.js"),U=a("./tracking/constant.js"),D=a("./site-modules/shared/utils/appraisal-link-constructor.js"),M=a("./site-modules/shared/components/form-validation/validation.js"),Y=a("./site-modules/shared/components/appraisal/appraisal-tabs/appraise-tab-content-form-wrapper.jsx");class F extends p.PureComponent{render(){const e=this.props,t=e.isFullWidth,a=e.children;return t?b.a.createElement("div",null,a):b.a.createElement(C.a,null,b.a.createElement(T.a,{xs:12,md:9},a))}}F.propTypes={children:h.a.oneOfType([h.a.arrayOf(h.a.node),h.a.node]).isRequired,isFullWidth:h.a.bool},F.defaultProps={isFullWidth:!1};var B=a("./site-modules/shared/components/appraisal/trade-in-appraiser-steps/license-plate-and-vin-step/epo-tab-content-form-wrapper.jsx"),$=a("./site-modules/shared/components/field-error/field-error.jsx"),q=a("./site-modules/shared/components/styled-select/styled-select.jsx"),H=a("./site-modules/shared/components/spinner/spinner.jsx"),W=a("./data/models/vehicle-vin.js"),G=a("./site-modules/shared/constants/appraisal/appraisal.js"),z=a("./site-modules/shared/components/appraisal/trade-in-appraiser-steps/license-plate-and-vin-step/let-us-know-wufoo.jsx"),K=a("./utils/seed-randomizers.js"),Q=a("./site-modules/shared/utils/appraisal/check-vin-inventory.js");a("./site-modules/shared/components/appraisal/appraisal-tabs/license-plate-tab-content/license-plate-tab-content.scss");a.d(t,"a",function(){return te});const J={licensePlate:{INVALID:"Please enter a valid license plate",LANDING_INVALID:e=>b.a.createElement(p.Fragment,null,"We could not find that license plate. If your license plate is a special plate (vanity, disabled person, special interest, etc.), please use your ",e," instead."),INVALID_WITH_WUFOO:e=>b.a.createElement(p.Fragment,null,"We could not find that license plate. If your license plate is a special plate (vanity, disabled person, special interest, etc.), please use your ",e," instead. ",b.a.createElement(z.a,null)),ERROR:"We're sorry, we could not look up your license plate at this time.",NO_STYLES:"We're sorry. We were unable to locate your license plate. Please try entering a VIN or a Make, Model, Year instead."},stateCode:{INVALID:"Please select a state"}},Z=9,X={action_name:U.b.ACTION_APPRAISE_VEHICLE,action_category:U.b.USER_ACTION_CATEGORY,action_cause:U.b.ACTION_CAUSE_BUTTON_CLICK},ee={LICENSE_PLATE:{VIN_BY_ADDRESS_OVERLAY:{xs:12},APPRAISAL_VALUE:{xs:12,md:6},DEFAULT:{xs:12,md:5,lg:6,xl:5},VDP_EMBEDDED:{xs:12,md:6},ESCAPE_HATCH:{xs:7},DRAWER_TYPE:{xs:12,md:6}},STATE_CODE:{VIN_BY_ADDRESS_OVERLAY:{xs:12},APPRAISAL_VALUE:{xs:12,md:4,xl:5},DEFAULT:{xs:12,md:4,lg:6,xl:5},VDP_EMBEDDED:{xs:12,md:6},ESCAPE_HATCH:{xs:5},DRAWER_TYPE:{xs:12,md:6}}};class te extends p.Component{constructor(){var e;e=super(...arguments),this.state={vinFromLicensePlate:this.props.vinFromLicensePlate,licensePlate:this.props.licensePlate,stateCode:this.props.initialStateCode,isSubmitting:!1,isSubmitted:!1,errorMap:new Map,styleIds:[],isVisibleAppraisalBtn:!0},this.onLicensePlateChange=(e=>{let t=e.target.value;return this.setStateValueAndClearError("licensePlate",t)}),this.onStateCodeChange=function(){let t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).stateCode;return t&&e.setStateValueAndClearError("stateCode",t)},this.setSquishVinError=(()=>this.setState(e=>{let t=e.errorMap;return t.set("licensePlateWide",J.licensePlate.NO_STYLES),t.delete("licensePlate"),{isSubmitting:!1,errorMap:t}},this.props.onValidationError)),this.setStateValueAndClearError=((e,t)=>{const a=this.props.onValueChange;this.setState(a=>{let s=a.errorMap;return s.has(e)&&s.delete(e),{[e]:t,errorMap:s,isSubmitted:!1}},a)}),this.getAppraisalButton=(()=>{const e=this.props,t=e.ctaText,a=e.isLookUpStyleView,s=this.state.isSubmitting;return b.a.createElement("div",{className:y()({"mt-0_5":a})},b.a.createElement(k.a,{color:"success",className:"text-transform-none btn-responsive-sm-down py-0_5",onClick:this.handleSubmit,disabled:s,"data-test":"submit-license-plate-btn"},s&&b.a.createElement("span",{className:"pr-0_5"},b.a.createElement(H.a,{size:14,thickness:1,color:"white"})),b.a.createElement("span",{className:"size-16"},t)))}),this.uniqInputId="",this.resetIsSubmitting=(()=>this.setState({isSubmitting:!1})),this.resetIsSubmitted=(e=>this.setState({isSubmitted:!1},e)),this.handleVinTabChange=(e=>{const t=this.props.setVinTabActive;e.preventDefault(),t&&t()}),this.handleSubmit=(async e=>{e.preventDefault();const t=this.props.setModelValue;await t("licensePlateError",x.b),await this.props.clearVin(),this.setState({isSubmitted:!0},()=>this.toggleSubmit(this.validateAndSubmit))}),this.validate=(()=>{const e=this.state,t=e.licensePlate,a=e.stateCode,s=M.a.validateLicensePlate(t),n=M.a.validateValue(a);return this.setState(e=>{let t=e.errorMap;return s?(t.delete("licensePlate"),t.delete("licensePlateWide")):(t.set("licensePlate",J.licensePlate.INVALID),t.delete("licensePlateWide")),n?t.delete("stateCode"):t.set("stateCode",J.stateCode.INVALID),{errorMap:t}}),n&&s}),this.toggleSubmit=(e=>this.setState(e=>({isSubmitting:!e.isSubmitting}),e)),this.validateAndSubmit=(async()=>{const e=this.props,t=e.setVin,a=e.creativeId,s=e.onValidationError,i=e.ctaText,l=e.isAppraisalValuePage,d=e.vinTabLink,c=e.isStylesFromUniversalVinEnabled,m=e.setLicensePlateAndStateCode,u=e.licensePlateLookupError,p=e.setStylesAndVin,b=e.setModelValue,_=this.state,h=_.licensePlate,E=_.stateCode,y=_.vinFromLicensePlate,g=_.isSubmitted,S=o()(y,"vin",null);if(this.validate())if(!g||S){if(w.a.fireTrackAction({event_type:U.b.EVENT_TYPE_ACTION_PROGRESS,event_data:Object(n.a)({},X,{subaction_name:U.b.SUBMIT_LICENSE_PLATE,creative_id:a,value:i})}),w.a.fireTrackAction({event_type:U.b.EVENT_TYPE_ACTION_START,event_data:Object(n.a)({},X,{subaction_name:U.b.LICENSE_PLATE,creative_id:a,value:h})}),w.a.fireTrackAction({event_type:U.b.EVENT_TYPE_ACTION_START,event_data:Object(n.a)({},X,{subaction_name:U.b.LICENSE_PLATE_STATE,creative_id:a,value:E})}),S&&!u){let e,s;w.a.fireTrackAction({event_type:U.b.EVENT_TYPE_ACTION_PROGRESS,event_data:Object(n.a)({},X,{subaction_name:U.b.LICENSE_PLATE_LOOKUP,creative_id:a,value:U.b.VIN_FOUND})}),Object(Q.a)(S,G.e,r.a);let i=[];if(c)p((i=await Object(W.e)(S)).map(e=>o()(e,"vehicleInfo.styleInfo",{})).map(e=>({makeName:e.make,makeNiceId:e.makeNiceId,modelName:e.model,modelNiceId:e.modelNiceId,year:e.year,styleId:parseInt(e.styleId,10),styleName:e.style})),S,h),e=i.length>1?null:o()(i,"[0].vehicleInfo.vehicleColors.exterior.id",""),s=i.map(e=>o()(e,"vehicleInfo.styleInfo.styleId","")),w.a.fireTrackAction(Object(G.nb)(s,a));else{const e=await Object(W.f)(S);p(e,S,h),s=e.map(e=>{return e.styleId})}return this.setState({styleIds:s,colorId:e}),t(S),void b("eligibilityCreativeIds",x.b,{[S]:a})}this.setState(e=>{let t=e.errorMap;return null===S||u?(t.set("licensePlate",J.licensePlate.ERROR),t.delete("licensePlateWide")):l?(t.set("licensePlateWide",J.licensePlate.INVALID_WITH_WUFOO(d)),t.delete("licensePlate")):(t.set("licensePlateWide",J.licensePlate.LANDING_INVALID(d)),t.delete("licensePlate")),{isSubmitting:!1,errorMap:t}},s),w.a.fireTrackAction({event_type:U.b.EVENT_TYPE_ACTION_PROGRESS,event_data:Object(n.a)({},X,{subaction_name:U.b.LICENSE_PLATE_LOOKUP,creative_id:a,value:u?U.b.LOOKUP_ERROR:U.b.VIN_NOT_FOUND})})}else m({licensePlate:h,stateCode:E});else this.toggleSubmit(s)})}componentDidMount(){this.props.useUniqId&&(this.uniqInputId=Object(K.c)());const e=o()(this.props,"vinFromLicensePlate.service");e&&w.a.fireTrackAction({event_type:U.b.EVENT_TYPE_ACTION_PROGRESS,event_data:Object(n.a)({},X,{action_cause:U.b.ACTION_CAUSE_USER_INPUT,subaction_name:U.b.LICENSE_PLATE_LOOKUP_SERVICE,creative_id:this.props.creativeId,value:e})})}componentDidUpdate(e){const t=this.props,a=t.vinFromLicensePlate,s=t.squishStyles,i=t.isAppraisalValuePage,l=t.vinEligibility,r=t.onCompleteCallback,d=t.creativeId,m=t.isVdpEmbedded,p=t.licensePlateLookupError,b=t.isLookUpStyleView,_=t.isAppExtensionPage,h=o()(a,"vin",null),E=o()(a,"service"),y=o()(e.vinFromLicensePlate,"vin",null),g=o()(e.vinFromLicensePlate,"service"),S=this.state,v=S.isSubmitting,C=S.isSubmitted,f=S.colorId,T=!u()(s,e.squishStyles),O=!u()(l,e.vinEligibility);if(!h||!E||u()(h,y)&&u()(E,g)||w.a.fireTrackAction({event_type:U.b.EVENT_TYPE_ACTION_PROGRESS,event_data:Object(n.a)({},X,{action_cause:U.b.ACTION_CAUSE_USER_INPUT,subaction_name:U.b.LICENSE_PLATE_LOOKUP_SERVICE,creative_id:this.props.creativeId,value:E})}),T&&!c()(s)){const e=s[0],t=e.makeNiceId,a=e.modelNiceId,i=e.year;w.a.fireTrackAction({event_type:U.b.EVENT_TYPE_ACTION_PROGRESS,event_data:Object(n.a)({},X,{action_cause:U.b.ACTION_CAUSE_USER_INPUT,subaction_name:U.b.SUBACTION_VIN_ENTRY,creative_id:d,value:h})});const o=Object(D.b)({make:t,model:a,year:i,queryParams:{vin:h,styleIds:this.state.styleIds.join(","),colorId:f},isAppExtensionPage:_});m?(window.open(o,"_blank"),v&&this.resetIsSubmitting()):b||R.b.push(o)}T&&c()(s)&&(w.a.fireTrackAction({event_type:U.b.EVENT_TYPE_ACTION_PROGRESS,event_data:{action_category:U.b.USER_ACTION_CATEGORY,action_cause:U.b.ACTION_CAUSE_USER_INPUT,action_name:U.b.ACTION_APPRAISE_VEHICLE,creative_id:d,subaction_name:U.b.SUBACTION_SQUISHVIN_DECODE,value:U.b.MMY_NOT_FOUND}}),w.a.fireTrackAction({event_type:U.b.EVENT_TYPE_ACTION_PROGRESS,event_data:{action_category:U.b.USER_ACTION_CATEGORY,action_cause:U.b.ACTION_CAUSE_USER_INPUT,action_name:U.b.ACTION_APPRAISE_VEHICLE,creative_id:d,subaction_name:U.b.SUBACTION_VIN_ERROR,value:`${h}_${U.b.SUBACTION_SQUISHVIN_DECODE}_${U.b.MMY_NOT_FOUND}`}}),this.setSquishVinError()),C&&(h!==y||p)&&this.resetIsSubmitted(async()=>{await this.validateAndSubmit()}),i&&O&&!c()(l)&&v&&this.toggleSubmit(r(h,l))}static getDerivedStateFromProps(e,t){const a=e.vinFromLicensePlate;return u()(a,t.vinFromLicensePlate)?{}:{vinFromLicensePlate:a}}render(){const e=this.props,t=e.stateCodes,a=e.isMobile,n=e.ctaText,i=e.isAppraisalValuePage,o=e.tabContentModal,l=e.isSecondary,r=e.isVdpEmbedded,d=e.squishVinError,c=e.isEscapeHatch,m=e.isFullWidth,u=e.isLookUpStyleView,_=e.isEscapeHatchDrawer,h=e.isLocationStyleStep,E=e.hideVinLicensePlateBtn,g=e.isAddressToVinEnabled,v=e.isVinByAddressOverlay,f=this.state,O=f.isSubmitting,I=f.errorMap,P=f.licensePlate,V=f.stateCode,L=I.has("licensePlate"),x=I.has("licensePlateWide"),R=I.has("stateCode"),w=!O&&!(L||R||x)&&d;let U,D,M;v?(U=Y.a,D=ee.LICENSE_PLATE.VIN_BY_ADDRESS_OVERLAY,M=ee.STATE_CODE.VIN_BY_ADDRESS_OVERLAY):r?(U=F,D=ee.LICENSE_PLATE.VDP_EMBEDDED,M=ee.STATE_CODE.VDP_EMBEDDED):!i||_||h?u||_||h?(U=Y.a,D=ee.LICENSE_PLATE.DRAWER_TYPE,M=ee.STATE_CODE.DRAWER_TYPE):(U=Y.a,D=ee.LICENSE_PLATE.DEFAULT,M=ee.STATE_CODE.DEFAULT):(U=B.a,D=ee.LICENSE_PLATE.APPRAISAL_VALUE,M=ee.STATE_CODE.APPRAISAL_VALUE,c&&(D=ee.LICENSE_PLATE.ESCAPE_HATCH,M=ee.STATE_CODE.ESCAPE_HATCH));const W=`license-plate${this.uniqInputId}`,G=`state-code${this.uniqInputId}`;let z=_?7:6;z=h?4:z;const K=!h||a||v,Q=(!i||h)&&!v;return b.a.createElement(U,{isFullWidth:m||h||v,isEscapeHatch:c},b.a.createElement(S.a,{onSubmit:this.handleSubmit},b.a.createElement(C.a,{className:y()("appraise-by-license-plate-tab",{"mt-2":_})},b.a.createElement(T.a,Object(s.a)({},D,{className:y()({"px-0":h})}),b.a.createElement(A.a,{className:y()("styled-input",{"has-danger":L,"pr-md-0_75 pr-lg-1":h,"text-left":v})},b.a.createElement(j.a,{className:y()({"font-weight-bold":i&&!c&&!h,"size-12":Q,"size-14 text-gray-darker":c,"size-16 text-left font-weight-bold":v}),for:W},"License Plate"),b.a.createElement(N.a,{className:y()("license-plate-input",{"size-16":K,"size-14":!K}),id:W,value:P,onChange:this.onLicensePlateChange,placeholder:c?"":"Enter License Plate",maxLength:Z}),b.a.createElement($.a,{id:`${W}-error`,error:I.get("licensePlate"),classes:"mt-0_5"}))),b.a.createElement(T.a,Object(s.a)({},M,{className:y()({"px-0":h})}),b.a.createElement(A.a,{className:y()({"has-danger":R,"pl-md-0_75 pl-lg-1":h,"text-left":v})},b.a.createElement(q.a,{id:G,name:"state-code",labelText:"State",labelClassName:y()({"font-weight-bold":i&&!c&&!h,"size-12":Q,"size-14 text-gray-darker":c,"size-16 text-left font-weight-bold":v}),className:y()({"text-gray-dark":c,"size-16":K,"size-14":!K}),toggle:"Select State",labelKey:"stateCode",valueKey:"stateCode",options:t,value:V,onChange:this.onStateCodeChange}),b.a.createElement($.a,{id:`${G}-error`,error:I.get("stateCode"),classes:"mt-0_5"}))),b.a.createElement(T.a,{xs:12,className:y()({"px-0":h})},b.a.createElement($.a,{id:`license-plate-landing-input${this.uniqInputId}-error`,error:I.get("licensePlateWide"),classes:"mb-1"}))),b.a.createElement("div",{className:y()({"mb-2":v,"pt-1":v&&!d})},i||h||v?b.a.createElement(p.Fragment,null,!a&&w&&b.a.createElement(C.a,null,b.a.createElement(T.a,{xs:12,className:y()({"px-0":h})},b.a.createElement($.a,{id:"vin-errors",error:d,classes:"mb-1"}))),(!E||v)&&b.a.createElement(C.a,{className:y()("align-items-center",{"mt-0_5":c||h||_})},b.a.createElement(T.a,{xs:12,md:c||v?12:z,className:y()({"px-0":h})},b.a.createElement(k.a,{color:_&&!g?"primary-b":"success",block:!0,className:y()("epo-license-plate-continue-btn text-transform-none",{"py-1":c&&!v,"py-0_5":!c&&!v}),onClick:this.handleSubmit,disabled:O,"data-tracking-id":"epo_submit_license_plate","data-test":"submit-license-plate-btn","data-tracking-value":l?`${n} 2`:n},O&&b.a.createElement("span",{className:"pr-0_5"},b.a.createElement(H.a,{size:14,thickness:1,color:"white"})),b.a.createElement("span",{className:"size-16"},n)),a&&w&&b.a.createElement($.a,{id:"vin-errors",error:d,classes:"mt-0_5"})),o&&b.a.createElement(T.a,{xs:12,md:c?12:6,className:y()("mt-1 text-center",{"text-md-left mt-md-0":!c})},o))):this.getAppraisalButton())))}}te.propTypes={setModelValue:h.a.func.isRequired,setVin:h.a.func.isRequired,clearVin:h.a.func.isRequired,squishStyles:h.a.arrayOf(h.a.shape({id:h.a.number,year:h.a.number,makeName:h.a.string,makeNiceId:h.a.string,modelName:h.a.string,modelNiceId:h.a.string})),stateCodes:L.a.States,licensePlate:h.a.string,stateCode:h.a.string,isMobile:h.a.bool,isSecondary:h.a.bool,ctaText:h.a.string,creativeId:h.a.string,isEscapeHatch:h.a.bool,useUniqId:h.a.bool,onCompleteCallback:h.a.func,onValidationError:h.a.func,vinEligibility:x.a.VinEligibility,vinFromLicensePlate:h.a.shape({vin:h.a.string,service:h.a.string}),licensePlateLookupError:h.a.bool,isAppraisalValuePage:h.a.bool,isVdpEmbedded:h.a.bool,tabContentModal:h.a.oneOfType([h.a.node,h.a.func]),squishVinError:h.a.oneOfType([h.a.string,h.a.node,h.a.func]),setVinTabActive:h.a.func,setLicensePlateAndStateCode:h.a.func,onValueChange:h.a.func,setStylesAndVin:h.a.func,initialStateCode:h.a.string,vinTabLink:h.a.oneOfType([h.a.node,h.a.func]),isStylesFromUniversalVinEnabled:h.a.bool,isLookUpStyleView:h.a.bool,isEscapeHatchDrawer:h.a.bool,isLocationStyleStep:h.a.bool,isFullWidth:h.a.bool,hideVinLicensePlateBtn:h.a.bool,isAppExtensionPage:h.a.bool,isAddressToVinEnabled:h.a.bool,isVinByAddressOverlay:h.a.bool},te.defaultProps={squishStyles:null,stateCodes:[],licensePlate:"",stateCode:"",isMobile:!1,isAppraisalValuePage:!1,isVdpEmbedded:!1,isStylesFromUniversalVinEnabled:!1,isSecondary:!1,ctaText:"Continue",creativeId:G.e,isEscapeHatch:!1,useUniqId:!0,onCompleteCallback:r.a,onValidationError:r.a,setStylesAndVin:r.a,vinEligibility:null,vinFromLicensePlate:{},licensePlateLookupError:!1,tabContentModal:null,squishVinError:null,setVinTabActive:null,setLicensePlateAndStateCode:r.a,onValueChange:r.a,initialStateCode:"",vinTabLink:null,isLookUpStyleView:!1,isEscapeHatchDrawer:!1,isLocationStyleStep:!1,isFullWidth:!1,hideVinLicensePlateBtn:!1,isAppExtensionPage:!1,isAddressToVinEnabled:!1,isVinByAddressOverlay:!1}},"./site-modules/shared/components/appraisal/appraisal-utm-storage/appraisal-utm-storage.js":function(e,t,a){"use strict";a.d(t,"a",function(){return m});a("../node_modules/core-js/modules/es6.regexp.constructor.js");var s=a("../node_modules/lodash/flatten.js"),n=a.n(s),i=a("./utils/location.js"),o=a("./site-modules/shared/utils/storage.js");const l="appraisals",r="appraisal",d="eval",c="facebook",m={get isSemCampaignAppraisals(){return this.getSessionStorage().get("sem_campaign_appraisals")||!1},get isSemCampaignFacebook(){return this.getSessionStorage().get("sem_campaign_facebook")||!1},getSessionStorage(){return this.sessionStorage||(this.sessionStorage=new o.a("sessionStorage")),this.sessionStorage},checkAndSetSemCampaignAppraisals(e){this.isUtmAccountQueryParamAppraisals(e)&&this.getSessionStorage().set("sem_campaign_appraisals",!0)},checkAndSetSemCampaignFacebook(e){this.isUtmSourceQueryParamFacebook(e)&&this.getSessionStorage().set("sem_campaign_facebook",!0)},isUtmAccountQueryParamAppraisals(e){try{const t=Object(i.a)(e).utm_account;return n()([t]).some(e=>e&&(l===e.toLowerCase()||r===e.toLowerCase()))}catch(e){return console.error("Error in isUtmAccountQueryParamAppraisals:",e.message),!1}},isUtmSourceQueryParamFacebook(e){try{const t=Object(i.a)(e),a=t.utm_account,s=t.utm_source,o=n()([a]).some(e=>new RegExp(`\\b${d}(_.*)?`,"i").test(e)),l=n()([s]).some(e=>e&&c===e.toLowerCase());return o&&l}catch(e){return console.error("Error in isUtmSourceQueryParamFacebook:",e.message),!1}}}},"./site-modules/shared/components/appraisal/trade-in-appraiser-steps/license-plate-and-vin-step/epo-tab-content-form-wrapper.jsx":function(e,t,a){"use strict";a.d(t,"a",function(){return p});var s=a("../node_modules/react/index.js"),n=a.n(s),i=a("../node_modules/prop-types/index.js"),o=a.n(i),l=a("../node_modules/classnames/index.js"),r=a.n(l),d=a("../node_modules/reactstrap/lib/Row.js"),c=a.n(d),m=a("../node_modules/reactstrap/lib/Col.js"),u=a.n(m);class p extends s.PureComponent{render(){const e=this.props,t=e.children,a=e.isEscapeHatch,s=e.isEscapeHatchDrawer,i=e.isLocationStyleStep,o=a||s||i?12:8;return n.a.createElement(c.a,null,n.a.createElement(u.a,{xs:12,xl:o,className:r()({"px-0":i})},t))}}p.propTypes={children:o.a.oneOfType([o.a.arrayOf(o.a.node),o.a.node]).isRequired,isEscapeHatch:o.a.bool,isEscapeHatchDrawer:o.a.bool,isLocationStyleStep:o.a.bool},p.defaultProps={isEscapeHatch:!1,isEscapeHatchDrawer:!1,isLocationStyleStep:!1}},"./site-modules/shared/components/appraisal/trade-in-appraiser-steps/license-plate-and-vin-step/let-us-know-wufoo.jsx":function(e,t,a){"use strict";a.d(t,"a",function(){return o});var s=a("../node_modules/react/index.js"),n=a.n(s);const i="https://tier3.wufoo.com/forms/carmax-instant-offer-on-edmunds/";function o(){return n.a.createElement("span",null,"Think there is something wrong? Let us know"," ",n.a.createElement("a",{href:i,rel:"nofollow noopener noreferrer",target:"_blank",className:"text-primary-darker text-decoration-underline"},"here."))}},"./site-modules/shared/components/field-error/field-error.jsx":function(e,t,a){"use strict";a.d(t,"a",function(){return d});var s=a("../node_modules/react/index.js"),n=a.n(s),i=a("../node_modules/prop-types/index.js"),o=a.n(i),l=a("../node_modules/classnames/index.js"),r=a.n(l);function d(e){let t=e.error,a=e.classes,s=e.id;return t?n.a.createElement("div",{id:s,className:r()("text-danger small",a)},t):null}d.propTypes={error:o.a.oneOfType([o.a.string,o.a.node,o.a.func]),classes:o.a.string,id:o.a.string.isRequired},d.defaultProps={error:null,classes:""}},"./site-modules/shared/components/find-vin-modal/find-vin-modal.jsx":function(e,t,a){"use strict";a.d(t,"a",function(){return _});var s=a("../node_modules/react/index.js"),n=a.n(s),i=a("../node_modules/prop-types/index.js"),o=a.n(i),l=a("../node_modules/reactstrap/lib/Button.js"),r=a.n(l),d=a("../node_modules/reactstrap/lib/Modal.js"),c=a.n(d),m=a("./utils/event-toolbox.js"),u=a("./tracking/constant.js"),p=a("./images/vin-masked-asset.svg"),b=a.n(p);a("./site-modules/shared/components/find-vin-modal/find-vin-modal.scss");class _ extends s.Component{constructor(){super(...arguments),this.state={isOpen:!1},this.trackModalToggle=(()=>{const e=this.props.creativeId,t=this.state.isOpen;m.a.fireTrackAction({event_type:u.b.EVENT_TYPE_ACTION_COMPLETED,event_data:{action_name:u.b.ACTION_SHOW_CONTENT,action_category:u.b.SYSTEM_ACTION_CATEGORY,action_cause:u.b.ACTION_CAUSE_LINK_CLICK,subaction_name:t?u.b.FIND_VIN:u.b.CLOSE_POPUP,creative_id:e,value:t?"open":"close"}})}),this.toggleModal=(()=>this.setState(e=>({isOpen:!e.isOpen}),this.trackModalToggle))}render(){const e=this.props,t=e.className,a=e.isInfoIcon;return n.a.createElement(s.Fragment,null,n.a.createElement(r.a,{color:"link",className:t,onClick:this.toggleModal},n.a.createElement("span",{className:"font-weight-normal"},a?n.a.createElement("i",{className:"text-gray icon icon-info size-12"}):"Where can I find my VIN?")),n.a.createElement(c.a,{modalClassName:"p-1 p-md-2 p-lg-3",className:"find-vin-modal my-0 mx-auto",isOpen:this.state.isOpen,toggle:this.toggleModal},n.a.createElement("header",{className:"px-2 my-1 find-vin-modal-header"},n.a.createElement("h4",{className:"size_20 text-gray-darker"},"Where can I find my VIN?"),n.a.createElement(r.a,{color:"link",size:"lg",className:"close-btn p-0_25","aria-label":"Close",onClick:this.toggleModal},n.a.createElement("i",{className:"icon-cross2 size-16"}))),n.a.createElement("div",{className:"px-2 pb-1 text-gray-darker"},n.a.createElement("p",{className:"size-14"},"There are two easy ways of finding your VIN. Your VIN consists of 17 digits and capital letters."),n.a.createElement("img",{src:b.a,className:"my-1 img-fluid",alt:"Where can I find my VIN?"}),n.a.createElement("p",{className:"m-0 size-14"},"Other locations to find your VIN are:"),n.a.createElement("ul",{className:"size-14 pl-1"},n.a.createElement("li",null,"Insurance card/insurance policy"),n.a.createElement("li",null,"Vehicle title and registration")))))}}_.propTypes={creativeId:o.a.string.isRequired,className:o.a.string,isInfoIcon:o.a.bool},_.defaultProps={className:"p-0 border-0 text-primary-darker text-transform-none size-16 find-vin-modal-open-btn",isInfoIcon:!1}},"./site-modules/shared/components/validation/validation-helper/validation-helper.js":function(e,t,a){"use strict";a.d(t,"a",function(){return i});a("../node_modules/core-js/modules/es6.regexp.replace.js");var s=a("./site-modules/shared/components/form-validation/validation.js"),n=a("./site-modules/shared/components/form-validation/validation-async.js");const i={validatePhoneNumber:async(e,t)=>{const a=e.fieldValue.replace(/\D/g,""),i=!a.length||s.b.RE_PHONE_HAS_TEN_DIGITS.test(a)&&!s.b.RE_PHONE_SEVEN_SAME_LAST_DIGITS.test(a)&&!s.b.RE_PHONE_STARTS_WITH_01.test(a)&&!s.b.RE_PHONE_WRONG_AREA_CODE.test(a)&&!s.b.RE_PHONE_WRONG_PREFIX.test(a);return i&&e.isAsync?(async(e,t,a)=>(await n.a.fetchPhoneValidation({phone:e,id:t},a)).isPhoneValid)(a,e.id,t):i},validateZipCode:e=>!e.fieldValue.length||s.b.RE_ZIP_HAS_FIVE_DIGITS.test(e.fieldValue),shouldMatchAndNotEmpty:e=>{const t=e.fieldValue,a=e.minLength,s=!0===e.reverseFlag?t!==a:t===a;return!!t.length&&s},validateStreet:e=>{if(!e.fieldValue)return!1;const t=e.fieldValue.trim();return s.a.validateMinLength(t,e.minLength)&&s.b.RE_ADDRESS_HAS_NO_WRONG_CHARACTERS.test(t)&&!s.b.RE_NAME_SEVEN_CONSONANTS_CONSEQUENTLY.test(t)&&s.b.RE_PHONE_STARTS_WITH_DIGIT.test(t)&&!s.b.RE_NAME_THREE_SAME_CHARACTERS_CONSEQUENTLY.test(t)},validateCity:e=>{if(!e.fieldValue)return!1;const t=e.fieldValue.trim();return s.a.validateMinLength(t,e.minLength)&&s.b.RE_ADDRESS_HAS_NO_WRONG_CHARACTERS.test(t)&&!s.b.RE_NAME_SEVEN_CONSONANTS_CONSEQUENTLY.test(t)&&!s.b.RE_NAME_THREE_SAME_CHARACTERS_CONSEQUENTLY.test(t)},validateName:function(e){const t=e.fieldValue;if(!t)return!1;const a=t.trim();return s.a.validateMinLength(a,e.minLength)&&s.a.validateName(a)},validateFieldLength:function(e){return s.a.validateMinLength(e.fieldValue,e.minLength)}}},"./site-modules/shared/components/vehicle-dropdowns/constants.js":function(e,t,a){"use strict";a.d(t,"b",function(){return s}),a.d(t,"a",function(){return n});const s="mmy-select w-100 btn btn-sm btn-secondary",n={name:"All makes",slug:"all"}},"./site-modules/shared/components/vehicle-dropdowns/make-dropdown.jsx":function(e,t,a){"use strict";a.d(t,"a",function(){return m}),a.d(t,"b",function(){return p});var s=a("../node_modules/@babel/runtime/helpers/esm/objectSpread.js"),n=a("./data/luckdragon/redux/react-binding.jsx"),i=a("./data/models/vehicle.js"),o=a("./site-modules/shared/components/select/select.jsx"),l=a("./site-modules/shared/components/styled-select/styled-select.jsx"),r=a("./site-modules/shared/utils/publication-states.js"),d=a("./site-modules/shared/components/vehicle-dropdowns/constants.js");const c={options:Object(n.a)("makesList",i.c,(e,t)=>{let a=t.pubStates,s=t.includeAllMakes,n=t.valueKey,i=t.labelKey;return s?[{[n]:d.a.slug,[i]:d.a.name},...Object(r.a)(e,a)]:Object(r.a)(e,a)})},m=Object(n.b)(o.a,c),u={labelText:"Make",isLabelHidden:!0,name:"select-make",toggle:"Select Make",valueKey:"slug",labelKey:"name",includeAllMakes:!1},p=Object(n.b)(l.a,c);p.defaultProps=Object(s.a)({},u),m.defaultProps=Object(s.a)({},u,{className:`js-makes-select ${d.b}`})},"./site-modules/shared/components/vehicle-dropdowns/model-dropdown.jsx":function(e,t,a){"use strict";a.d(t,"a",function(){return g}),a.d(t,"b",function(){return S});var s=a("../node_modules/@babel/runtime/helpers/esm/objectSpread.js"),n=a("../node_modules/lodash/mapValues.js"),i=a.n(n),o=a("../node_modules/lodash/groupBy.js"),l=a.n(o),r=a("../node_modules/lodash/toArray.js"),d=a.n(r),c=a("./data/luckdragon/redux/react-binding.jsx"),m=a("./data/models/vehicle.js"),u=a("./site-modules/shared/components/select/select.jsx"),p=a("./site-modules/shared/components/styled-select/styled-select.jsx"),b=a("./site-modules/shared/utils/sorting.js"),_=a("./site-modules/shared/utils/publication-states.js"),h=a("./constants/pub-states.js"),E=a("./site-modules/shared/components/vehicle-dropdowns/constants.js");const y={options:Object(c.a)(e=>{const t=e.make;return t&&`makes["${t.slug}"].models`},m.c,(e,t)=>Object(_.a)(d()(e),t.pubStates).sort(b.a)),optionsGrouped:Object(c.a)(e=>{const t=e.make;return e.pubStates.includes(h.a.USED)&&t&&`makes["${t.slug}"].models`},m.c,(e,t)=>{const a=Object(_.a)(d()(e),t.pubStates),s=l()(a,e=>{let t=e.pubStates;return t[h.a.NEW]||t[h.a.NEW_USED]?"popular":"other"});if(Object.keys(s).length<2)return{};const n=i()(s,e=>e.sort(b.a));return{"Popular Models":n.popular,"Other Models":n.other}})},g=Object(c.b)(u.a,y),S=Object(c.b)(p.a,y),v={labelText:"Model",isLabelHidden:!0,name:"select-model",toggle:"Select Model",valueKey:"name",labelKey:"name"};g.defaultProps=Object(s.a)({},v,{className:`js-models-select ${E.b}`}),S.defaultProps=Object(s.a)({},v)},"./site-modules/shared/components/vehicle-dropdowns/year-dropdown.jsx":function(e,t,a){"use strict";a.d(t,"b",function(){return h}),a.d(t,"a",function(){return y});var s=a("../node_modules/@babel/runtime/helpers/esm/objectSpread.js"),n=a("../node_modules/lodash/toArray.js"),i=a.n(n),o=a("./data/luckdragon/redux/react-binding.jsx"),l=a("./data/models/vehicle.js"),r=a("./constants/pub-states.js"),d=a("./site-modules/shared/components/select/select.jsx"),c=a("./site-modules/shared/components/styled-select/styled-select.jsx"),m=a("./site-modules/shared/utils/sorting.js"),u=a("./site-modules/shared/utils/date-utils.js"),p=a("./site-modules/shared/utils/publication-states.js"),b=a("./site-modules/shared/components/vehicle-dropdowns/constants.js");const _={options:Object(o.a)(e=>{const t=e.make,a=e.model;return t&&a&&Object(l.l)({make:t.slug,model:a.slug})},l.c,function(e,t){let a=t.pubStates,n=t.showLatestYears,o=t.splitNewUsed,l=t.earliestYear,d=t.includeNextYear,c=void 0===d||d,b=t.additionalOptions,_=Object(p.a)(i()(e),a).sort(m.c);if(n){const e=Object(u.g)();return _.filter(t=>{let a=t.year;return e.includes(Number(a))})}if(o){const e=[];return _.forEach(t=>t.pubStates.NEW_USED?e.push(Object(s.a)({},t,{displayPubState:r.a.NEW,label:`${t.year} - New`}),Object(s.a)({},t,{displayPubState:r.a.USED,label:`${t.year} - Used`})):e.push(Object(s.a)({},t,{label:t.year}))),e}if(l&&(_=_.filter(e=>e.year>=l)),!c){const e=Object(u.c)().getFullYear()+1;_=_.filter(t=>t.year<e)}return[..._,...b||[]]})},h=Object(o.b)(d.a,_),E={name:"select-year",toggle:"Select Year",valueKey:"year",labelKey:"year"},y=Object(o.b)(c.a,_);y.defaultProps=Object(s.a)({},E),h.defaultProps=Object(s.a)({},E,{className:`js-years-select ${b.b}`})},"./site-modules/shared/components/ymms-dropdowns/make-dropdown/make-dropdown.jsx":function(e,t,a){"use strict";a.d(t,"a",function(){return _});var s=a("../node_modules/@babel/runtime/helpers/esm/objectSpread.js"),n=a("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),i=a("../node_modules/react/index.js"),o=a.n(i),l=a("../node_modules/prop-types/index.js"),r=a.n(l),d=a("./site-modules/shared/components/select/select.jsx"),c=a("./site-modules/shared/components/styled-select/styled-select.jsx"),m=a("./data/luckdragon/redux/react-binding.jsx"),u=a("./data/models/vehicle.js");const p={options:Object(m.a)(e=>{let t=e.year,a=e.pubStates;return t&&Object(u.H)(t,a)},u.c)};function b(e){let t=e.isStyled,a=Object(n.a)(e,["isStyled"]);const s=t?c.a:d.a;return o.a.createElement(s,a)}b.propTypes=Object(s.a)({},d.c,{isStyled:r.a.bool}),b.defaultProps=Object(s.a)({},d.b,{isStyled:!1});const _=Object(m.b)(b,p)},"./site-modules/shared/components/ymms-dropdowns/model-dropdown/model-dropdown.jsx":function(e,t,a){"use strict";a.d(t,"a",function(){return _});var s=a("../node_modules/@babel/runtime/helpers/esm/objectSpread.js"),n=a("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),i=a("../node_modules/react/index.js"),o=a.n(i),l=a("../node_modules/prop-types/index.js"),r=a.n(l),d=a("./site-modules/shared/components/select/select.jsx"),c=a("./site-modules/shared/components/styled-select/styled-select.jsx"),m=a("./data/luckdragon/redux/react-binding.jsx"),u=a("./data/models/vehicle.js");const p={options:Object(m.a)(e=>{let t=e.make,a=e.year,s=e.pubStates;return t&&a&&Object(u.m)(t,a,s)},u.c)};function b(e){let t=e.isStyled,a=Object(n.a)(e,["isStyled"]);const s=t?c.a:d.a;return o.a.createElement(s,a)}b.propTypes=Object(s.a)({},d.c,{isStyled:r.a.bool}),b.defaultProps=Object(s.a)({},d.b,{isStyled:!1});const _=Object(m.b)(b,p)},"./site-modules/shared/components/ymms-dropdowns/year-dropdown/year-dropdown.jsx":function(e,t,a){"use strict";a.d(t,"a",function(){return E});var s=a("../node_modules/@babel/runtime/helpers/esm/objectSpread.js"),n=a("../node_modules/@babel/runtime/helpers/esm/extends.js"),i=a("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),o=a("../node_modules/react/index.js"),l=a.n(o),r=a("../node_modules/prop-types/index.js"),d=a.n(r),c=a("./data/luckdragon/redux/react-binding.jsx"),m=a("./data/models/vehicle.js"),u=a("./constants/pub-states.js"),p=a("./site-modules/shared/components/select/select.jsx"),b=a("./site-modules/shared/components/styled-select/styled-select.jsx");function _(e){let t=e.isStyled,a=e.years,s=Object(i.a)(e,["isStyled","years"]);const o=t?b.a:p.a;return l.a.createElement(o,Object(n.a)({},s,{name:"select-year",options:a}))}_.propTypes=Object(s.a)({},p.c,{isStyled:d.a.bool,years:d.a.arrayOf(d.a.shape({year:d.a.number}))}),_.defaultProps=Object(s.a)({},p.b,{isStyled:!1,years:[]});const h={years:Object(c.a)(e=>{let t=e.pubStates;return Object(m.y)(t)},m.c)},E=Object(c.b)(_,h);E.propTypes=Object(s.a)({},p.c,{isStyled:d.a.bool,years:d.a.arrayOf(d.a.shape({year:d.a.number})),pubStates:d.a.arrayOf(d.a.string)}),E.defaultProps=Object(s.a)({},p.b,{isStyled:!1,years:[],pubStates:[u.a.NEW,u.a.NEW_USED,u.a.USED]})},"./site-modules/shared/components/ymms-dropdowns/ymms-dropdowns.jsx":function(e,t,a){"use strict";var s=a("../node_modules/@babel/runtime/helpers/esm/extends.js"),n=(a("../node_modules/core-js/modules/es6.regexp.to-string.js"),a("../node_modules/react/index.js")),i=a.n(n),o=a("../node_modules/prop-types/index.js"),l=a.n(o),r=a("../node_modules/reactstrap/lib/Form.js"),d=a.n(r),c=a("../node_modules/reactstrap/lib/FormGroup.js"),m=a.n(c),u=a("../node_modules/reactstrap/lib/Row.js"),p=a.n(u),b=a("../node_modules/reactstrap/lib/Col.js"),_=a.n(b),h=a("./site-modules/shared/components/field-error/field-error.jsx"),E=a("./constants/pub-states.js"),y=a("./site-modules/shared/components/ymms-dropdowns/make-dropdown/make-dropdown.jsx"),g=a("../node_modules/@babel/runtime/helpers/esm/objectSpread.js"),S=a("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),v=a("../node_modules/lodash/get.js"),C=a.n(v),f=a("./site-modules/shared/components/select/select.jsx"),T=a("./site-modules/shared/components/styled-select/styled-select.jsx"),O=a("./data/luckdragon/redux/react-binding.jsx"),N=a("./data/models/vehicle.js");const I={options:Object(O.a)(e=>{let t=e.make,a=e.model,s=e.submodel,n=e.year;return e.withoutSubmodel?!!(t&&a&&n)&&Object(N.z)({make:t,model:a,year:n}):!!(n&&t&&a&&C()(s,"niceId"))&&Object(N.z)({year:n,make:t,model:a,submodel:s.niceId})},N.c,e=>e.filter(e=>{return e.publicationState!==E.a.PRE_PROD}))};function A(e){let t=e.isStyled,a=Object(S.a)(e,["isStyled"]);const s=t?T.a:f.a;return i.a.createElement(s,a)}A.propTypes=Object(g.a)({},f.c,{isStyled:l.a.bool}),A.defaultProps=Object(g.a)({},f.b,{isStyled:!1});const P=Object(O.b)(A,I);var j=a("./site-modules/shared/components/ymms-dropdowns/model-dropdown/model-dropdown.jsx"),V=a("./site-modules/shared/utils/publication-states.js");const k={options:Object(O.a)(e=>{let t=e.make,a=e.year;return t&&a&&Object(N.n)({make:t,year:a})},N.c,e=>Object(V.a)(e,[E.a.NEW_USED,E.a.USED,E.a.NEW]).sort((e,t)=>e.name.toLowerCase()>t.name.toLowerCase()?1:-1))};function L(e){let t=e.isStyled,a=Object(S.a)(e,["isStyled"]);const s=t?T.a:f.a;return i.a.createElement(s,a)}L.propTypes=Object(g.a)({},f.c,{isStyled:l.a.bool}),L.defaultProps=Object(g.a)({},f.b,{isStyled:!1});const x=Object(O.b)(L,k);var R=a("./site-modules/shared/components/ymms-dropdowns/year-dropdown/year-dropdown.jsx");const w={options:Object(O.a)(e=>{let t=e.make,a=e.model,s=e.submodel,n=e.year;return e.withoutSubmodel?!!(t&&a&&n)&&Object(N.x)({make:t,model:a,year:n}):!!(n&&t&&a&&C()(s,"niceId"))&&Object(N.x)({year:n,make:t,model:a,submodel:s.niceId})},N.c,e=>e.filter(e=>{return e.publicationState!==E.a.PRE_PROD}))};function U(e){let t=e.isStyled,a=e.options,n=e.labelKey,o=(e.mostPopularStyleId,Object(S.a)(e,["isStyled","options","labelKey","mostPopularStyleId"]));const l=t?T.a:f.a,r=a.length>1?function(e,t){const a=[...e],s=a[0];return s[t]=`${s[t]} (Most Popular)`,a}(a,n):a;return i.a.createElement(l,Object(s.a)({options:r,labelKey:n},o))}U.propTypes=Object(g.a)({},f.c,{isStyled:l.a.bool}),U.defaultProps=Object(g.a)({},f.b,{isStyled:!1});const D=Object(O.b)(U,w);a.d(t,"a",function(){return Y});const M={Col:{PropTypes:l.a.shape({xs:l.a.number,md:l.a.number,lg:l.a.number,xl:l.a.number}),DefaultProps:{xs:12,md:null,lg:null,xl:null}}};class Y extends n.Component{constructor(e){super(e),this.onChange=(()=>{const e=this.state,t=e.make,a=e.model,s=e.submodel,n=e.style,i=e.year;this.props.onChange({make:t,model:a,submodel:s,style:n,year:i})}),this.setMake=(e=>{let t=e.niceName;this.setState({make:t,model:null,submodel:null,style:null},this.onChange)}),this.setModel=(e=>{let t=e.niceId;this.setState({model:t,submodel:null,style:null},this.onChange)}),this.setSubmodel=(e=>{let t=e.niceId,a=e.name,s=e.modelNiceId;this.setState({submodel:{niceId:t,name:a},model:s,style:null},this.onChange)}),this.setYear=(e=>{let t=e.year;this.setState({year:t,make:null,submodel:null,style:null,model:null},this.onChange)}),this.setStyle=(e=>{this.setState({style:e},this.onChange)}),this.state={}}static getDerivedStateFromProps(e,t){const a=e.prepopulatedVehicle,s=a.year,n=a.makeSlug,i=a.modelSlug,o=a.id,l=a.name,r=a.submodels;if(s&&t.prevPrepopulatedVehicle!==e.prepopulatedVehicle){const t={year:s.toString(),make:n,model:i,style:{id:o,name:l}};return r&&(t.submodel={niceId:r.slug,name:r.name}),t.prevPrepopulatedVehicle=e.prepopulatedVehicle,t}return{}}render(){const e=this.props,t=e.className,a=e.dropdownClassName,n=e.labelClassName,o=e.formGroupClassName,l=e.children,r=e.dropdownPlaceholders,c=e.dropdownLabels,u=e.dropdownTrackingIds,b=e.useStyledSelects,E=e.hasModelsDropdown,g=e.hasSubmodelsDropdown,S=e.hasStylesDropdown,v=e.displayError,C=e.errorMessages,f=e.hideLabels,T=e.useMostPopularStylesDropdown,O=e.rowClassName,N=e.colClassName,I=e.dropdownColSize,A=e.suffix,V=e.pubStates,k=e.onSubmit,L=this.state,w=L.make,U=L.model,M=L.submodel,Y=L.style,F=L.year,B=T?D:P;return i.a.createElement(d.a,{autoComplete:"off",className:t,onSubmit:k},i.a.createElement(p.a,{className:O},i.a.createElement(_.a,Object(s.a)({},I.year,{className:N}),i.a.createElement(m.a,{className:o},i.a.createElement(R.a,{name:"select-year",toggle:r.year,labelText:c.year,valueKey:"year",labelKey:"year",value:F,onChange:this.setYear,onFocus:this.props.onFocus,className:a,labelClassName:n,"data-tracking-id":u.year,id:`ymms-select-year${A}`,isStyled:b,isLabelHidden:f,pubStates:V}),v.year&&i.a.createElement(h.a,{id:"yearError",classes:"mb-0 mt-0_25",error:C.year}))),i.a.createElement(_.a,Object(s.a)({},I.make,{className:N}),i.a.createElement(m.a,{className:o},i.a.createElement(y.a,{year:F,name:"select-make",toggle:r.make,labelText:c.make,valueKey:"niceName",labelKey:"name",onChange:this.setMake,value:w,className:a,labelClassName:n,"data-tracking-id":u.make,id:`ymms-select-make${A}`,isStyled:b,isLabelHidden:f,pubStates:V}),v.make&&i.a.createElement(h.a,{id:"makeError",classes:"mb-0 mt-0_25",error:C.make}))),E&&i.a.createElement(_.a,Object(s.a)({},I.model,{className:N}),i.a.createElement(m.a,{className:o},i.a.createElement(j.a,{make:w,year:F,name:"select-model",toggle:r.model,labelText:c.model,valueKey:"niceId",labelKey:"name",value:U,onChange:this.setModel,className:a,labelClassName:n,"data-tracking-id":u.model,id:`ymms-select-model${A}`,isStyled:b,isLabelHidden:f,pubStates:V}),v.model&&i.a.createElement(h.a,{id:"modelError",classes:"mb-0 mt-0_25",error:C.model}))),g&&i.a.createElement(_.a,Object(s.a)({},I.submodel,{className:N}),i.a.createElement(m.a,{className:o},i.a.createElement(x,{make:w,year:F,name:"select-submodel",toggle:r.submodel,labelText:c.submodel,valueKey:"name",labelKey:"name",value:M&&M.name,onChange:this.setSubmodel,className:a,labelClassName:n,"data-tracking-id":u.submodel,id:`ymms-select-submodel${A}`,isStyled:b,isLabelHidden:f}),v.submodel&&i.a.createElement(h.a,{id:"submodelError",classes:"mb-0 mt-0_25",error:C.submodel}))),S&&i.a.createElement(_.a,Object(s.a)({},I.style,{className:N}),i.a.createElement(m.a,{className:o},i.a.createElement(B,{make:w,model:U,submodel:M,year:F,withoutSubmodel:!g,name:"select-style",toggle:r.style,labelText:c.style,valueKey:"name",labelKey:"name",onChange:this.setStyle,value:Y&&Y.name,className:a,labelClassName:n,"data-tracking-id":u.style,id:`ymms-select-style${A}`,isStyled:b,isLabelHidden:f}),v.style&&i.a.createElement(h.a,{id:"styleError",classes:"mb-0 mt-0_25",error:C.style})))),l&&l({make:w,model:U,submodel:M,year:F,style:Y}))}}Y.propTypes={children:l.a.func,onChange:l.a.func,onFocus:l.a.func,onSubmit:l.a.func,className:l.a.string,dropdownClassName:l.a.string,labelClassName:l.a.string,formGroupClassName:l.a.string,prepopulatedVehicle:l.a.shape({submodels:l.a.shape({name:l.a.string,slug:l.a.string}),id:l.a.oneOfType([l.a.number,l.a.string]),year:l.a.oneOfType([l.a.number,l.a.string]),makeSlug:l.a.string,modelSlug:l.a.string,name:l.a.string}),dropdownPlaceholders:l.a.shape({make:l.a.string,model:l.a.string,submodel:l.a.string,year:l.a.string,style:l.a.string}),dropdownLabels:l.a.shape({make:l.a.string,model:l.a.string,submodel:l.a.string,year:l.a.string,style:l.a.string}),dropdownTrackingIds:l.a.shape({make:l.a.string,model:l.a.string,submodel:l.a.string,year:l.a.string,style:l.a.string}),errorMessages:l.a.shape({make:l.a.string,model:l.a.string,submodel:l.a.string,year:l.a.string,style:l.a.string}),displayError:l.a.shape({make:l.a.bool,model:l.a.bool,year:l.a.bool,style:l.a.bool}),useStyledSelects:l.a.bool,hasModelsDropdown:l.a.bool,hasSubmodelsDropdown:l.a.bool,hasStylesDropdown:l.a.bool,hideLabels:l.a.bool,useMostPopularStylesDropdown:l.a.bool,rowClassName:l.a.string,colClassName:l.a.string,dropdownColSize:l.a.shape({year:M.Col.PropTypes,make:M.Col.PropTypes,model:M.Col.PropTypes,submodel:M.Col.PropTypes,style:M.Col.PropTypes}),suffix:l.a.string,pubStates:l.a.arrayOf(l.a.string)},Y.defaultProps={children:null,className:null,dropdownClassName:null,onChange:()=>{},onFocus:()=>{},onSubmit:void 0,labelClassName:"dropdown-label label text-gray-dark mb-0_5",formGroupClassName:"mb-0",prepopulatedVehicle:{},dropdownLabels:{},dropdownTrackingIds:{},dropdownPlaceholders:{make:"Select",model:"Select",submodel:"Select",year:"Select",style:"Select"},errorMessages:{make:"Please select a make",model:"Please select a model",submodel:"Please select a model",year:"Please select a year",style:"Please select a style"},displayError:{},useStyledSelects:!1,hasModelsDropdown:!1,hasSubmodelsDropdown:!0,hasStylesDropdown:!0,hideLabels:!1,useMostPopularStylesDropdown:!1,rowClassName:null,colClassName:null,dropdownColSize:{year:M.Col.DefaultProps,make:M.Col.DefaultProps,model:M.Col.DefaultProps,submodel:M.Col.DefaultProps,style:M.Col.DefaultProps},suffix:"",pubStates:[E.a.NEW,E.a.NEW_USED,E.a.USED]}},"./site-modules/shared/utils/appraisal-link-constructor.js":function(e,t,a){"use strict";a.d(t,"b",function(){return l}),a.d(t,"a",function(){return r});var s=a("../node_modules/@babel/runtime/helpers/esm/objectSpread.js"),n=a("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),i=a("./site-modules/shared/utils/string.js"),o=a("./site-modules/shared/constants/appraisal/paths.js");function l(e){let t,a,o,l,r=e.make,d=e.model,c=e.year,m=e.queryParams,u=e.isAppExtensionPage;if(m){var p=m;t=p.styleIds,a=p.vin,o=p.colorId,l=Object(n.a)(p,["styleIds","vin","colorId"])}const b=[a?{vin:a}:{},t?{styleIds:t}:{},o?{colorId:o}:{},Object(s.a)({},l)],_=decodeURIComponent(b.map(e=>e?Object(i.f)(e):"").filter(e=>e).join("&"));let h=`/${r}/${d}/${c}/appraisal-value/`;return u&&(h+="index.app"),`${h}${_.length?"?":""}${_}`}function r(e){let t=e.isAppExtensionPage,a=o.b.APPRAISAL_LANDING;return t&&(a+="index.app"),a}},"./site-modules/shared/utils/appraisal/check-vin-inventory.js":function(e,t,a){"use strict";a.d(t,"a",function(){return o});var s=a("./utils/event-toolbox.js"),n=a("./tracking/constant.js"),i=a("./data/api/api-client.js");const o=(e,t,a)=>{if(!e)return;const o=`/inventory/v5/vin/${e}`,l={event_type:n.b.EVENT_TYPE_ACTION_END,event_data:{action_name:n.b.ACTION_APPRAISE_VEHICLE,creative_id:t,action_category:n.b.USER_ACTION_CATEGORY,action_cause:n.b.ACTION_CAUSE_BUTTON_CLICK,subaction_name:n.b.SUBACTION_VIN_INVENTORY_CHECK}};i.c.fetch(o,{method:"GET"}).then(()=>{l.event_data.value=n.b.VIN_FOUND,s.a.fireTrackAction(l),a(!0)}).catch(()=>{l.event_data.value=n.b.VIN_NOT_FOUND,s.a.fireTrackAction(l),a(!1)})}},"./site-modules/shared/utils/appraiser/appraiser-validation-helper.js":function(e,t,a){"use strict";a.d(t,"m",function(){return E}),a.d(t,"f",function(){return y}),a.d(t,"h",function(){return g}),a.d(t,"l",function(){return S}),a.d(t,"j",function(){return v}),a.d(t,"a",function(){return C}),a.d(t,"g",function(){return f}),a.d(t,"c",function(){return O}),a.d(t,"d",function(){return N}),a.d(t,"b",function(){return I}),a.d(t,"e",function(){return A}),a.d(t,"p",function(){return j}),a.d(t,"q",function(){return V}),a.d(t,"t",function(){return k}),a.d(t,"s",function(){return L}),a.d(t,"r",function(){return x}),a.d(t,"k",function(){return R}),a.d(t,"o",function(){return w}),a.d(t,"n",function(){return U}),a.d(t,"i",function(){return D});a("../node_modules/core-js/modules/es6.regexp.replace.js");var s=a("../node_modules/lodash/reduce.js"),n=a.n(s),i=a("../node_modules/lodash/find.js"),o=a.n(i),l=a("../node_modules/lodash/isEmpty.js"),r=a.n(l),d=a("../node_modules/lodash/includes.js"),c=a.n(d),m=a("./site-modules/shared/constants/appraisal/appraisal.js"),u=a("./site-modules/shared/components/validation/validation-helper/validation-helper.js"),p=a("./site-modules/shared/components/form-validation/validation.js"),b=a("./site-modules/shared/utils/string.js");const _=(new Date).getFullYear(),h=1e3,E="zipCode",y="make",g="model",S="year",v="style",C="color",f="mileage",T=3e5,O="condition",N="epo-vin",I="conditionsQuestionsSection",A=new Map([[E,"Please enter your zip code"],[y,"Please select a make"],[g,"Please select a model"],[S,"Please select a year"],[v,"Please select a style"],[f,"Please enter vehicle mileage"],["mileageTooBigValue",`Mileage cannot be greater than ${Object(b.c)(T)}`],["mileageMinimumByModelYear","Please enter a valid mileage"],[O,"Please enter vehicle condition"],["vin",m.sb],[N,m.sb],["partnerOfferMileage","Please enter vehicle mileage"],[I,{singleQuestionErrorMessage:"Please answer this question",multipleQuestionsErrorMessage:"Please answer all of these questions"}]]);function P(e){return!!e}function j(e){const t=e.replace(/,/gm,"");return`${parseInt(t,10)||0}`}function V(e){return e.replace(/o/gi,"0").replace(/i/gi,"1").replace(/q/gi,"9").toUpperCase()}function k(e){return!!e.length&&u.a.validateZipCode({fieldValue:e})}function L(e){return p.a.validateVIN(e)}function x(e){return e&&Object.values(e).every(e=>e||!r()(e))}const R={[m.F]:[{fieldName:y,validators:[{test:P,message:A.get(y)}]},{fieldName:g,validators:[{test:P,message:A.get(g)}]},{fieldName:S,validators:[{test:P,message:A.get(S)}]},{fieldName:v,validators:[{test:P,message:A.get(v)}]},{fieldName:E,validators:[{test:k,message:A.get(E)}]}],[m.m]:[],[m.p]:[{fieldName:f,validators:[{test:function(e){return parseInt(j(e),10)>0},message:A.get(f)},{test:function(e){return parseInt(j(e),10)<=T},message:A.get("mileageTooBigValue")},{test:function(e,t){return!(t.styleYear<=_-2)||e>=h},message:A.get("mileageMinimumByModelYear")}]},{fieldName:O,validators:[{test:function(e){return!!e},message:A.get(O)},{test:function(e){return!c()(m.H,e)},message:"Please enter a non-damaged vehicle condition"}]}],[m.N]:[{fieldName:I,validators:[{test:x,message:A.get(I)}]}]};function w(e,t,a,s){const i=o()(R[e],e=>{return e.fieldName===t});return n()(i&&i.validators,(e,t)=>{let n=t.test;return e&&n(a,s)},!0)}function U(e,t,a,s){const i=o()(R[e],e=>{return e.fieldName===t});return n()(i&&i.validators,(e,t)=>{let n=t.test,i=t.message;return!e&&!n(a,s)&&i||e},void 0)}const D=[{input:C,selector:".colors-and-options-step"},{input:f,selector:".condition-mileage",options:{block:"end"}},{input:O,selector:".condition-and-mileage-step"},{input:I,selector:`[id^="${I}-error"]`}]},"./site-modules/shared/utils/vin-utils.js":function(e,t,a){"use strict";a.d(t,"a",function(){return n});var s=a("./site-modules/shared/components/form-validation/validation.js");const n=e=>s.a.validateVIN(e)&&`${e.substring(0,8)}${e.substring(9,11)}`}}]);
//# sourceMappingURL=13.chunk.e2ff9073ebc82fd90ff1.js.map