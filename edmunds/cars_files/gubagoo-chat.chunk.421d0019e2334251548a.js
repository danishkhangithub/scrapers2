(window.webpackJsonp=window.webpackJsonp||[]).push([["gubagoo-chat"],{"./site-modules/inventory/components/gubagoo-chat/gubagoo-chat.jsx":function(t,e,i){"use strict";i.r(e),i.d(e,"GubagooChatInjector",function(){return E}),i.d(e,"GubagooChat",function(){return T});var n=i("../node_modules/lodash/get.js"),a=i.n(n),o=i("../node_modules/react/index.js"),s=i.n(o),r=i("./data/models/inventory.js"),c=i("./utils/inject-script.js"),d=i("./utils/isomorphic-logger.js"),u=i("./site-modules/shared/utils/inventory-utils/goobagoo-chat.js"),_=i("./configuration.js"),l=i("./tracking/constant.js"),h=i("./utils/event-toolbox.js");const g="panel_sms_chat_form",p=1e3;class E extends o.Component{constructor(){var t;t=super(...arguments),this.fireWidgetViewTracking=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const i=a()(t.props.vinData,"dealerInfo.rooftopId");h.a.fireTrackAction({event_type:l.b.EVENT_TYPE_ACTION_START,event_data:{action_name:l.b.ACTION_LEAD_SUBMISSION,subaction_name:e?l.b.DISPLAY_CHAT_LEAD_FORM_FAILURE:l.b.DISPLAY_CHAT_LEAD_FORM,creative_id:g,action_cause:l.b.PAGE_LOAD_CAUSE,action_category:l.b.SYSTEM_ACTION_CATEGORY,partner_id:i,value:"gubagoo"}})},this.fireWidgetOpenTracking=(()=>{const t=a()(this.props.vinData,"dealerInfo.rooftopId");h.a.fireTrackAction({event_type:l.b.EVENT_TYPE_ACTION_COMPLETED,event_data:{action_name:l.b.ACTION_LEAD_SUBMISSION,subaction_name:l.b.DISPLAY_CHAT_LEAD_FORM,creative_id:g,action_cause:l.b.ACTION_CAUSE_BUTTON_CLICK,action_category:l.b.USER_ACTION_CATEGORY,partner_id:t,value:"gubagoo"}})}),this.removeListeners=(()=>{this.chatElements&&this.chatElements.forEach(t=>{t&&t.removeEventListener("click",this.fireWidgetOpenTracking)})}),this.initializeClickEvents=(()=>{this.chatElementsLoadTimeout=setTimeout(()=>{this.chatElements=[document.querySelector(".gg-app"),document.querySelector(".gg-invite")],this.chatElements.forEach(t=>{t&&t.addEventListener("click",this.fireWidgetOpenTracking)})},p)}),this.isScriptInjected=!1}componentDidMount(){const t=this.props.vinData,e=a()(t,"dealerInfo.dealerId");this.injectJS(e)}componentWillUnmount(){this.removeListeners(),this.chatElementsLoadTimeout&&clearTimeout(this.chatElementsLoadTimeout)}injectJS(t){this.isScriptInjected||window.ggLoader||(this.isScriptInjected=!0,Object(c.a)(`${_.a.get("gubagoo").scriptUrl}EDMUNDS_${t}.js`).then(()=>{this.fireWidgetViewTracking(),this.initializeClickEvents()}).catch(()=>{this.fireWidgetViewTracking(!0),Object(d.a)("warn","Inject Gubagoo script error")}))}render(){return s.a.createElement("div",{"data-gubagoo-chat":"true","data-hidedelighted":"true"})}}function T(t){let e=t.vinData;return Object(u.a)(e)?s.a.createElement(E,{vinData:e}):null}E.propTypes={vinData:r.b.InventoryVin},E.defaultProps={vinData:{}},T.propTypes={vinData:r.b.InventoryVin},T.defaultProps={vinData:{}}}}]);
//# sourceMappingURL=gubagoo-chat.chunk.4b28e5917c6f74ca8e37.js.map